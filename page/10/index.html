<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="天空の城">
<meta property="og:url" content="http://www.njiang.cn/page/10/index.html">
<meta property="og:site_name" content="天空の城">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="天空の城">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.njiang.cn/page/10/"/>





  <title> 天空の城 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-43682645-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">天空の城</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">愤怒的程序员，梦想着有一天也能飞！</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/12/02/yuan-chuang-use-of-undeclared-identifier-uistatusbarstylelightcontent/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/12/02/yuan-chuang-use-of-undeclared-identifier-uistatusbarstylelightcontent/" itemprop="url">
                  [原创]Use of undeclared identifier 'UIStatusBarStyleLightContent'
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-12-02T00:00:00+08:00">
              2013-12-02
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/12/02/yuan-chuang-use-of-undeclared-identifier-uistatusbarstylelightcontent/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/12/02/yuan-chuang-use-of-undeclared-identifier-uistatusbarstylelightcontent/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>These are iOS 7 features that won’t compile in XCode 4.6.3 which is trying to compile against iOS 6. You need to conditionally compile them out.</p>

<p>Wrap the offending code with:<br><pre><code>#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= 70000<br>    //iOS 7 only stuff here<br>#endif </code></pre></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/12/02/yuan-chuang-edgesforextendedlayout/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/12/02/yuan-chuang-edgesforextendedlayout/" itemprop="url">
                  [StackOverflow]edgesForExtendedLayout
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-12-02T00:00:00+08:00">
              2013-12-02
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/12/02/yuan-chuang-edgesforextendedlayout/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/12/02/yuan-chuang-edgesforextendedlayout/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Starting in iOS7, the view controllers use full-screen layout by default. At the same time, you have more control over how it lays out its views, and that’s done with those properties:</p>

<p><strong>edgesForExtendedLayout</strong></p>

<p>Basically, with this property you set which sides of your view can be extended to cover the whole screen. Imagine that you push a <code>UIViewController</code> into a <code>UINavigationController</code>, when the view of that view controller is laid out, it will start where the navigation bar ends, but this property will set which sides of the view (top, left, right, bottom) can be extended to fill the whole screen.</p>

<p>Let see it with an example:<br><pre><code>UIViewController <em>viewController = [[UIViewController alloc] init];<br>viewController.view.backgroundColor = [UIColor redColor];<br>UINavigationController </em>mainNavigationController = [[UINavigationController alloc] initWithRootViewController:viewController];</code></pre><br>Here you are not setting the value of edgesForExtendedLayout, therefore the default value is taken (UIRectEdgeAll), so the view extends its layout to fill the whole screen.</p>

<p>This is the result:</p>

<p><img alt="enter image description here" src="http://i.stack.imgur.com/MOB6v.png"></p>

<p>As you can see, the red background extends behind the navigation bar and the status bar.</p>

<p>Now, you are going to set that value to UIRectEdgeNone, so you are telling the view controller to not extend the view to cover the screen:<br><pre><code>UIViewController <em>viewController = [[UIViewController alloc] init];<br>viewController.view.backgroundColor = [UIColor redColor];<br>viewController.edgesForExtendedLayout = UIRectEdgeNone;<br>UINavigationController </em>mainNavigationController = [[UINavigationController alloc] initWithRootViewController:viewController];</code></pre><br>And the result:</p>

<p><img alt="enter image description here" src="http://i.stack.imgur.com/ojAvO.png"></p>

<p><strong>automaticallyAdjustsScrollViewInsets</strong></p>

<p>This property is used when your view is a <code>UIScrollView</code> or similar, like a <code>UITableView</code>. You want your table to start where the navigation bar ends, because you wont see the whole content if not, but at the same time you want your table to cover the whole screen when scrolling. In that case, setting edgesForExtendedLayout to None won’t work because your table will start scrolling where the navigation bar ends and it wont go behind it.</p>

<p>Here is where this property comes handy, if you let the view controller automatically adjust the insents (setting this property to YES, also the default value) it will add inset to the top of the table, so the table will start where the navigation bar ends, but the scroll will cover the whole screen.</p>

<p>This is when is set to NO:</p>

<p><img alt="enter image description here" src="http://i.stack.imgur.com/9Iapl.png"></p>

<p>And YES (by default):</p>

<p><img alt="enter image description here" src="http://i.stack.imgur.com/VVQHQ.png"></p>

<p>In both cases, the table scrolls behind the navigation bar, but in the second case (YES), it will start from below the navigation bar.</p>

<p><strong>extendedLayoutIncludesOpaqueBars</strong></p>

<p>This value is just an addition to the previous ones. If the status bar is opaque, the views won’t be extended to include the status bar too, unless this parameter is YES.</p>

<p>So, if you extend your view to cover the navigation bar (edgesForExtendedLayout to UIRectEdgeAll) and the parameter is NO (default) it wont covert the status bar if it’s opaque.</p>

<p>If something is not clear, write a comment and I’ll answer to it.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/11/26/zhuan-nsinvocation/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/26/zhuan-nsinvocation/" itemprop="url">
                  [转]NSInvocation
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-11-26T00:00:00+08:00">
              2013-11-26
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/26/zhuan-nsinvocation/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/11/26/zhuan-nsinvocation/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>An NSInvocation is an Objective-C message rendered static, that is, it is an action turned into an object. NSInvocation objects are used to store and forward messages between objects and between applications, primarily by NSTimer objects and the distributed objects system.</p>

<p>An NSInvocation object contains all the elements of an Objective-C message: a target, a selector, arguments, and the return value. Each of these elements can be set directly, and the return value is set automatically when the NSInvocation object is dispatched.</p>

<p>An NSInvocation object can be repeatedly dispatched to different targets; its arguments can be modified between dispatch for varying results; even its selector can be changed to another with the same method signature (argument and return types). This flexibility makes NSInvocation useful for repeating messages with many arguments and variations; rather than retyping a slightly different expression for each message, you modify the NSInvocation object as needed each time before dispatching it to a new target.</p>

<p>NSInvocation does not support invocations of methods with either variable numbers of arguments or union arguments. You should use the invocationWithMethodSignature: class method to create NSInvocation objects; you should not create these objects using <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/alloc" target="_blank" rel="external">alloc</a> and <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/init" target="_blank" rel="external">init</a>.</p>

<p>This class does not retain the arguments for the contained invocation by default. If those objects might disappear between the time you create your instance of NSInvocation and the time you use it, you should explicitly retain the objects yourself or invoke the retainArguments method to have the invocation object retain them itself.</p>

<p><b>Note:</b> NSInvocation conforms to the <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCoding" target="_blank" rel="external">NSCoding</a> protocol, but only supports coding by an <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSPortCoder_Class/Reference/Reference.html#//apple_ref/occ/cl/NSPortCoder" target="_blank" rel="external">NSPortCoder</a>. NSInvocation does not support archiving.</p>

<p>TestProject<br><br>File - MyClass.h<br><pre lang="OBJC">#import &lt;Foundation/Foundation.h&gt;</pre></p>

<p></p><p>@interface MyClass : NSObject</p><p></p>
<p>- (NSString<em>)appendMyString:(NSString</em>)string;</p>

<p></p><p>@end<br>File - MyClass.m</p>
<p><pre lang="OBJC">#import “MyClass.h”</pre></p><p></p>
<p></p><p>@implementation MyClass</p><p></p>
<p>- (id)init<br><br>{<br>    self = [super init];<br><br>    if (self) {<br><br>        // init<br><br>    }<br><br>    return self;<br><br>}</p>

<p>- (NSString<em>)appendMyString:(NSString </em>)string<br><br>{<br>    NSString* myString = [NSString stringWithFormat:@”%@ after append method”, string];<br><br>    return myString;<br><br>}</p>

<p>- (void)dealloc<br><br>{<br>    [super dealloc];<br><br>}</p>

<p></p><p>@end<br>File - main.m</p>
<p><pre lang="OBJC">#import &lt;Foundation/Foundation.h&gt;</pre></p>
<p>#import “MyClass.h”</p><p></p>
<p>int main(int argc, const char <em> argv[])<br><br>{<br>    NSAutoreleasePool</em> pool = [[NSAutoreleasePool alloc] init];</p>

<p>    MyClass<em> myClass = [[MyClass alloc] init];<br><br>    NSString</em> myString = @”My string”;</p>

<p>    NSString* normalInvokeString = [myClass appendMyString:myString];<br><br>    NSLog(@”The normal invoke string is: %@”, normalInvokeString);</p>

<p>    SEL mySelector = @selector(appendMyString:);<br><br>    NSMethodSignature<em> sig = [MyClass instanceMethodSignatureForSelector:mySelector];<br><br>    NSInvocation</em> myInvocation = [NSInvocation invocationWithMethodSignature:sig];<br><br>    [myInvocation setTarget:myClass];<br><br>    [myInvocation setSelector:mySelector];</p>

<p>    [myInvocation setArgument:&amp;myString atIndex:2];</p>

<p>    NSString* result = nil;<br><br>    [myInvocation retainArguments];<br><br>    [myInvocation invoke];<br><br>    [myInvocation getReturnValue:&amp;result];<br><br>    NSLog(@”The NSInvocation invoke string is: %@”, result);</p>

<p>    [myClass release];</p>

<p>    [pool drain];<br><br>    return 0;<br><br>}<br>The result is like below<br><img src="http://www.njiang1987.com/wp-content/gallery/testprojectscreenshot/screen-shot-2013-11-26-at-11-07-56-am.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/11/26/zhuan-nsfilemanager/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/26/zhuan-nsfilemanager/" itemprop="url">
                  [转]NSFileManager
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-11-26T00:00:00+08:00">
              2013-11-26
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/26/zhuan-nsfilemanager/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/11/26/zhuan-nsfilemanager/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>NSFileManager</code> is Foundation’s high-level API for working with file systems. It abstracts Unix and Finder internals, providing a convenient way to create, read, move, copy, and delete files &amp; directories on local or networked drives, as well as iCloud ubiquitous containers.</p>

<p>File systems are a complex topic, with decades of history, vestigial complexities, and idiosyncrasies, and is well outside the scope of a single article. And since most applications don’t often interact with the file system much beyond simple file operations, one can get away with only knowing the basics.</p>

<p>What follows are some code samples for your copy-pasting pleasure. Use them as a foundation for understanding how to adjust parameters to your particular use case:<br></p><h2>Common Tasks</h2><br><blockquote>Throughout the code samples is the magical incantation<code>NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)</code>. This may be tied with KVO as one of the worst APIs in Cocoa. Just know that this returns an array containing the user documents directory as the first object. Thank goodness for the inclusion of <code>NSArray -firstObject</code>.</blockquote><br><h3>Determining If A File Exists</h3><br><div><br><pre><code data-lang="objective-c">NSFileManager <em>fileManager = [NSFileManager defaultManager];<br>NSString </em>documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];<br>NSString <em>filePath = [documentsPath stringByAppendingPathComponent:@”file.txt”];<br>BOOL fileExists = [fileManager fileExistsAtPath:filePath];<br></em></code></pre><br></div><br><h3>Listing All Files In A Directory</h3><br><div><br><pre><code data-lang="objective-c">NSFileManager fileManager = [NSFileManager defaultManager];<br>NSURL <em>bundleURL = [[NSBundle mainBundle] bundleURL];<br>NSArray </em>contents = [fileManager contentsOfDirectoryAtURL:bundleURL<br>                               includingPropertiesForKeys:@[]<br>                                                  options:NSDirectoryEnumerationSkipsHiddenFiles<br>                                                    error:nil];</code></pre></div><p></p>

<p>NSPredicate <em>predicate = [NSPredicate predicateWithFormat:@”pathExtension ENDSWITH ‘.png’”];<br><br>for (NSString </em>path in [contents filteredArrayUsingPredicate:predicate]) {<br><br>    // Enumerate each .png file in directory<br><br>}<br><br><br></p><h2>Recursively Enumerating Files In A Directory</h2><br><div><br><pre><code data-lang="objective-c">NSFileManager <em>fileManager = [NSFileManager defaultManager];<br>NSURL </em>bundleURL = [[NSBundle mainBundle] bundleURL];<br>NSDirectoryEnumerator <em>enumerator = [fileManager enumeratorAtURL:bundleURL<br>                                      includingPropertiesForKeys:@[NSURLNameKey, NSURLIsDirectoryKey]<br>                                                         options:NSDirectoryEnumerationSkipsHiddenFiles<br>                                                    errorHandler:^BOOL(NSURL </em>url, NSError *error)<br>{<br>    NSLog(@”[Error] %@ (%@)”, error, url);<br>}];</code></pre></div><p></p>

<p>NSMutableArray <em>mutableFileURLs = [NSMutableArray array];<br><br>for (NSURL </em>fileURL in enumerator) {<br><br>    NSString *filename;<br><br>    [fileURL getResourceValue:&amp;filename forKey:NSURLNameKey error:nil];</p>

<p>    NSNumber *isDirectory;<br><br>    [fileURL getResourceValue:&amp;isDirectory forKey:NSURLIsDirectoryKey error:nil];</p>

<p>    // Skip directories with ‘<em>‘ prefix, for example<br><br>    if ([filename hasPrefix:@”</em>“] &amp;&amp; [isDirectory boolValue]) {<br><br>        [enumerator skipDescendants];<br><br>        continue;<br><br>    }</p>

<p>    if (![isDirectory boolValue]) {<br><br>        [mutableFileURLs addObject:fileURL];<br><br>    }<br><br>}<br><br><br></p><h3>Create a Directory</h3><br><div><br><pre><code data-lang="objective-c">NSFileManager <em>fileManager = [NSFileManager defaultManager];<br>NSString </em>documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];<br>NSString <em>imagesPath = [documentsPath stringByAppendingPathComponent:@”images”];<br>if (![fileManager fileExistsAtPath:imagesPath]) {<br>    [fileManager createDirectoryAtPath:imagesPath withIntermediateDirectories:NO attributes:nil error:nil];<br>}<br></em></code></pre><br></div><br><h3>Deleting a File</h3><br><div><br><pre><code data-lang="objective-c">NSFileManager fileManager = [NSFileManager defaultManager];<br>NSString <em>documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];<br>NSString </em>filePath = [documentsPath stringByAppendingPathComponent:@”image.png”];<br>NSError *error = nil;</code></pre></div><p></p>

<p>if (![fileManager removeItemAtPath:filePath error:&amp;error]) {<br><br>    NSLog(@”[Error] %@ (%@)”, error, filePath);<br><br>}<br><br><br></p><h3>Determine the Creation Date of a File</h3><br><div><br><pre><code data-lang="objective-c">NSFileManager <em>fileManager = [NSFileManager defaultManager];<br>NSString </em>documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];<br>NSString *filePath = [documentsPath stringByAppendingPathComponent:@”Document.pages”];</code></pre></div><p></p>

<p>NSDate <em>creationDate = nil;<br><br>if ([fileManager fileExistsAtPath:filePath]) {<br><br>    NSDictionary </em>attributes = [fileManager attributesOfItemAtPath:filePath error:nil];<br><br>    creationDate = attributes[NSFileCreationDate];<br><br>}<br><br><br>There are a number of file attributes that are made accessible through <code>NSFileManager</code>, which can be fetched with <code>-attributesOfItemAtPath:error:</code>, and other methods:<br></p><h4>File Attribute Keys</h4><br><blockquote><br><ul><br>    <li><code>NSFileAppendOnly</code>: The key in a file attribute dictionary whose value indicates whether the file is read-only.</li><br>    <li><code>NSFileBusy</code>: The key in a file attribute dictionary whose value indicates whether the file is busy.</li><br>    <li><code>NSFileCreationDate</code>: The key in a file attribute dictionary whose value indicates the file’s creation date.</li><br>    <li><code>NSFileOwnerAccountName</code>: The key in a file attribute dictionary whose value indicates the name of the file’s owner.</li><br>    <li><code>NSFileGroupOwnerAccountName</code>: The key in a file attribute dictionary whose value indicates the group name of the file’s owner.</li><br>    <li><code>NSFileDeviceIdentifier</code>: The key in a file attribute dictionary whose value indicates the identifier for the device on which the file resides.</li><br>    <li><code>NSFileExtensionHidden</code>: The key in a file attribute dictionary whose value indicates whether the file’s extension is hidden.</li><br>    <li><code>NSFileGroupOwnerAccountID</code>: The key in a file attribute dictionary whose value indicates the file’s group ID.</li><br>    <li><code>NSFileHFSCreatorCode</code>: The key in a file attribute dictionary whose value indicates the file’s HFS creator code.</li><br>    <li><code>NSFileHFSTypeCode</code>: The key in a file attribute dictionary whose value indicates the file’s HFS type code.</li><br>    <li><code>NSFileImmutable</code>: The key in a file attribute dictionary whose value indicates whether the file is mutable.</li><br>    <li><code>NSFileModificationDate</code>: The key in a file attribute dictionary whose value indicates the file’s last modified date.</li><br>    <li><code>NSFileOwnerAccountID</code>: The key in a file attribute dictionary whose value indicates the file’s owner’s account ID.</li><br>    <li><code>NSFilePosixPermissions</code>: The key in a file attribute dictionary whose value indicates the file’s Posix permissions.</li><br>    <li><code>NSFileReferenceCount</code>: The key in a file attribute dictionary whose value indicates the file’s reference count.</li><br>    <li><code>NSFileSize</code>: The key in a file attribute dictionary whose value indicates the file’s size in bytes.</li><br>    <li><code>NSFileSystemFileNumber</code>: The key in a file attribute dictionary whose value indicates the file’s filesystem file number.</li><br>    <li><code>NSFileType</code>: The key in a file attribute dictionary whose value indicates the file’s type.</li><br>    <li><code>NSDirectoryEnumerationSkipsSubdirectoryDescendants</code>: Perform a shallow enumeration; do not descend into directories.</li><br>    <li><code>NSDirectoryEnumerationSkipsPackageDescendants</code>: Do not descend into packages.</li><br>    <li><code>NSDirectoryEnumerationSkipsHiddenFiles</code>: Do not enumerate hidden files.</li><br></ul><br></blockquote><br><h2>NSFileManagerDelegate</h2><br><code>NSFileManager</code> may optionally set a delegate to verify that it should perform a particular file operation. This allows the business logic of, for instance, which files to protect from deletion, to be factored out of the controller.<p></p>

<p>There are four kinds of methods in the <code>&lt;NSFileManagerDelegate&gt;</code> protocol, each with a variation for working with paths, as well as methods for error handling.<br><ul><br>    <li><code>-fileManager:shouldMoveItemAtURL:toURL:</code></li><br>    <li><code>-fileManager:shouldCopyItemAtURL:toURL:</code></li><br>    <li><code>-fileManager:shouldRemoveItemAtURL:</code></li><br>    <li><code>-fileManager:shouldLinkItemAtURL:toURL:</code></li><br></ul><br>If you were wondering when you might <code>alloc init</code> your own <code>NSFileManager</code> rather than using the shared instance, this is it. As per the documentation:<br><blockquote>If you use a delegate to receive notifications about the status of move, copy, remove, and link operations, you should create a unique instance of the file manager object, assign your delegate to that object, and use that file manager to initiate your operations.</blockquote><br><div><br><pre><code data-lang="objective-c">NSFileManager *fileManager = [[NSFileManager alloc] init];<br>fileManager.delegate = delegate;</code></pre></div></p>

<p>NSURL <em>bundleURL = [[NSBundle mainBundle] bundleURL];<br><br>NSArray </em>contents = [fileManager contentsOfDirectoryAtURL:bundleURL<br><br>                               includingPropertiesForKeys:@[]<br><br>                                                  options:NSDirectoryEnumerationSkipsHiddenFiles<br><br>                                                    error:nil];</p>

<p>for (NSString *filePath in contents) {<br><br>    [fileManager removeItemAtPath:filePath error:nil];<br><br>}<br><br><br></p><h4>CustomFileManagerDelegate.m</h4><br><div><br><pre><code data-lang="objective-c">#pragma mark - NSFileManagerDelegate</code></pre></div><p></p>

<p>- (BOOL)fileManager:(NSFileManager <em>)fileManager<br><br>shouldRemoveItemAtURL:(NSURL </em>)URL<br><br>{<br>    return ![[[URL lastPathComponent] pathExtension] isEqualToString:@”pdf”];<br><br>}<br><br><br></p><h2>Ubiquitous Storage</h2><br>Documents can also be moved to iCloud. If you guessed that this would be anything but straight forward, you’d be 100% correct.<p></p>

<p>This is another occasion when you’d <code>alloc init</code> your own <code>NSFileManager</code> rather than using the shared instance. Because <code>URLForUbiquityContainerIdentifier:</code> and<code>setUbiquitous:itemAtURL:destinationURL:error:</code> are blocking calls, this entire operation needs to be dispatched to a background queue.<br></p><h3>Move Item to Ubiquitous Storage</h3><br><div><br><pre><code data-lang="objective-c">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{<br>    NSFileManager <em>fileManager = [[NSFileManager alloc] init];<br>    NSString </em>documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];<br>    NSURL *fileURL = [NSURL fileURLWithPath:[documentsPath stringByAppendingPathComponent:@”Document.pages”]];</code></pre></div><p></p>

<p>    // Defaults to first listed in entitlements when <code>nil</code>; should replace with real identifier<br><br>    NSString *identifier = nil;</p>

<p>    NSURL <em>ubiquitousContainerURL = [fileManager URLForUbiquityContainerIdentifier:identifier];<br><br>    NSURL </em>ubiquitousFileURL = [ubiquitousContainerURL URLByAppendingPathComponent:@”Document.pages”];</p>

<p>    NSError *error = nil;<br><br>    BOOL success = [fileManager setUbiquitous:YES<br><br>                                    itemAtURL:fileURL<br><br>                               destinationURL:ubiquitousFileURL<br><br>                                        error:&amp;error];<br><br>    if (!success) {<br><br>        NSLog(@”[Error] %@ (%@) (%@)”, error, fileURL, ubiquitousFileURL);<br><br>    }<br><br>});<br><br><br><blockquote>You can find more information about ubiquitous document storage in Apple’s “iCloud File Management” document.</blockquote><br>[转自]：<a href="http://nshipster.com/nsfilemanager/" target="_blank" rel="external">http://nshipster.com/nsfilemanager/</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/11/19/zhuan-mac-che-di-shan-chu-mysql/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/19/zhuan-mac-che-di-shan-chu-mysql/" itemprop="url">
                  [转]Mac 彻底删除MySQL
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-11-19T00:00:00+08:00">
              2013-11-19
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/19/zhuan-mac-che-di-shan-chu-mysql/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/11/19/zhuan-mac-che-di-shan-chu-mysql/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>注意：确保MySQL没有运行。</p>

<p>首先编辑 <em>/etc/hostconfig</em> 删掉MYSQL的配置。<br><ol><br>    <li>在终端理执行 sudo nano /etc/hostconfig</li><br>    <li>删除 “MYSQLCOM=-YES”</li><br>    <li>按CTRL+X ， 之后按  “Y” 保存并退出。</li><br>    <li>复制如下命令到终端，并执行</li><br></ol><br><pre>sudo rm /usr/local/mysql<br>sudo rm -rf /usr/local/mysql<em><br>sudo rm -rf /Library/StartupItems/MySQLCOM<br>sudo rm -rf /Library/PreferencePanes/My</em><br>sudo rm -rf /Library/Receipts/mysql<em><br>sudo rm -rf /Library/Receipts/MySQL</em><br>sudo rm /etc/my.cnf</pre></p>

<p>ok,卸载完毕！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/11/11/zhuan-wordpress-for-ios-style-guide/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/11/zhuan-wordpress-for-ios-style-guide/" itemprop="url">
                  [转]WordPress-for-iOS-Style-Guide
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-11-11T00:00:00+08:00">
              2013-11-11
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/11/zhuan-wordpress-for-ios-style-guide/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/11/11/zhuan-wordpress-for-ios-style-guide/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><div id="head"><br><h1>WordPress for iOS Style Guide</h1><br></div><br><div id="wiki-content"><br><div><br><div id="wiki-body"><br><div></div></div></div></div></p>

<p>So you want to write some code for WordPress for iOS. That’s nice, thanks a lot. But before that take some minutes to read some tips that will probably make everyone’s life easier. Much of this guide is adapted from <a href="http://google-styleguide.googlecode.com/svn/trunk/objcguide.xml" target="_blank" rel="external">Google’s Objective-C Style Guide</a>. You should read that as well as<a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html" target="_blank" rel="external">Apple’s Coding Guidelines for Cocoa</a>.<br></p><h2><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#before-you-commit" name="before-you-commit" target="_blank" rel="external"></a>Before You Commit</h2><br><ul><br>    <li>Review what you commit: make sure you’re not leaving out anything, and that everything that you commit is meant to be there.<code>git add -p</code> is your friend here.</li><br>    <li>Check for whitespace. Not the most critical thing, but if you follow the previous step, you might see unnecessary white space added at the end of a line. Get rid of it</li><br>    <li>No NSLog in commits. We all use NSLog (or our WP<em> FileLogger variants) to debug. Unless you really want that to be on production, and logged into the wordpress.log file, remove it before commit. Our app is verbose enough already.</em></li><br>    <li>No commented out code. If the code was already there and you’re removing it to test something, don’t comment it, just remove it. You can always go back by checking out a previous version from source control.</li><br>    <li>Avoid new compiler warnings. A compiler warning might seem harmless, but when we compile for the app store, we use <code>-Werror</code>, so those insignificant warnings turn into real errors and force us to investigate what’s wrong at the last minute. You really don’t want to be messing with the code at that point.</li><br></ul><br>If there’s a ticket associated, make sure to use “refs #123″ or “fixes #123″ in the commit message. It makes easier to track why things changed<br><h2><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#spacing-and-formatting" name="spacing-and-formatting" target="_blank" rel="external"></a>Spacing and Formatting</h2><br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#spaces-vs-tabs" name="spaces-vs-tabs" target="_blank" rel="external"></a>Spaces vs Tabs</h3><br>Use only spaces, and indent 4 spaces at a time.<br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#line-length" name="line-length" target="_blank" rel="external"></a>Line Length</h3><br>Each line of text in your code should try to be at most 100 characters long. Objective C is a fairly verbose language and occasionally it makes sense to extend past the 100 character limit. However, this should be a rare occurrence and not commonplace.<br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#method-declarations-and-definitions" name="method-declarations-and-definitions" target="_blank" rel="external"></a>Method Declarations and Definitions</h3><br>One space should be used between the - or + and the return type, and no spacing in the parameter list except between parameters. Methods should look like this:<br><div><br><pre>- (void)doSomethingWithString:(NSString )theString<br>{<br>  …<br>}</pre><br></div><br>If you have too many parameters to fit on one line, giving each its own line is preferred. If multiple lines are used, align each using the colon before the parameter.<br><div><br><pre>- (void)doSomethingWith:(GTMFoo *)theFoo<br>                   rect:(NSRect)theRect<br>               interval:(float)theInterval<br>{<br>  …<br>}</pre><br></div><br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#method-invocations" name="method-invocations" target="_blank" rel="external"></a>Method Invocations</h3><br>Method invocations should be formatted much like method declarations. When there’s a choice of formatting styles, follow the convention already used in a given source file. Invocations should have all arguments on one line:<br><div><br><pre>[myObject doFooWith:arg1 name:arg2 error:arg3];</pre><br></div><br>or have one argument per line, with colons aligned:<br><div><br><pre>[myObject doFooWith:arg1<br>               name:arg2<br>              error:arg3];</pre><br></div><br>Don’t use any of these styles:<br><div><br><pre>[myObject doFooWith:arg1 name:arg2  // some lines with &gt;1 arg<br>              error:arg3];</pre></div><p></p>

<p>[myObject doFooWith:arg1<br><br>               name:arg2 error:arg3];</p>

<p>[myObject doFooWith:arg1<br><br>          name:arg2  // aligning keywords instead of colons<br><br>          error:arg3];<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#protocols" name="protocols" target="_blank" rel="external"></a>Protocols</h3><br>There should not be a space between the type identifier and the name of the protocol encased in angle brackets. This applies to class declarations, instance variables, and method declarations. For example:<br><div><br><pre>@interface MyProtocoledClass : NSObject&lt;NSWindowDelegate&gt; {<br>  id&lt;MyFancyDelegate&gt; _delegate;<br>}<br>- (void)setDelegate:(id&lt;MyFancyDelegate&gt;)aDelegate;<br>@end</pre><br></div><br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#blocks" name="blocks" target="_blank" rel="external"></a>Blocks</h3><br>Blocks are preferred to the target-selector pattern when creating callbacks, as it makes code easier to read. Code inside blocks should be indented four spaces. There are several appropriate style rules, depending on how long the block is:<br><ul><br>    <li>If the block can fit on one line, no wrapping is necessary.</li><br>    <li>If it has to wrap, the closing brace should line up with the first character of the line on which the block is declared.</li><br>    <li>Code within the block should be indented four spaces.</li><br>    <li>If the block is large, e.g. more than 20 lines, it is recommended to move it out-of-line into a local variable.</li><br>    <li>If the block takes no parameters, there are no spaces between the characters ^{. If the block takes parameters, there is no space between the ^( characters, but there is one space between the ) { characters.</li><br>    <li>Two space indents inside blocks are also allowed, but should only be used when it’s consistent with the rest of the project’s code.</li><br></ul><br><div><br><pre>// The entire block fits on one line.<br>[operation setCompletionBlock:^{ [self onOperationDone]; }];</pre></div><p></p>

<p>// The block can be put on a new line, indented four spaces, with the<br><br>// closing brace aligned with the first character of the line on which<br><br>// block was declared.<br><br>[operation setCompletionBlock:^{<br><br>    [self.delegate newDataAvailable];<br><br>}];</p>

<p>// Using a block with a C API follows the same alignment and spacing<br><br>// rules as with Objective-C.<br><br>dispatch_async(_fileIOQueue, ^{<br><br>    NSString* path = [self sessionFilePath];<br><br>    if (path) {<br><br>      // …<br><br>    }<br><br>});</p>

<p>// An example where the parameter wraps and the block declaration fits<br><br>// on the same line. Note the spacing of |^(SessionWindow <em>window) {|<br><br>// compared to |^{| above.<br><br>[[SessionService sharedService]<br><br>    loadWindowWithCompletionBlock:^(SessionWindow </em>window) {<br><br>        if (window) {<br><br>          [self windowDidLoad:window];<br><br>        } else {<br><br>          [self errorLoadingWindow];<br><br>        }<br><br>    }];</p>

<p>// Large blocks can be declared out-of-line.<br><br>void (^largeBlock)(void) = ^{<br><br>    // …<br><br>};<br><br>[_operationQueue addOperationWithBlock:largeBlock];<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#if-statements" name="if-statements" target="_blank" rel="external"></a>If Statements</h3><br>When writing if statements, make sure to use a curly brace even if it’s a one line statement.<br><div><br><pre>// Good<br>if (someValue != nil) {<br>  [self doSomething];<br>}</pre></div><p></p>

<p>// Bad</p>

<p>if (someValue != nil)<br><br>  [self doSomething];<br><br>The exception to this rule is if the statement being executed is a return statement.<br><div><br><pre>if (someValue != nil)<br>  return;</pre><br></div><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#ternary-operators" name="ternary-operators" target="_blank" rel="external"></a>Ternary Operators</h3><br>Be cautious about using the ternary operator as it can make code very difficult to read. Only use a ternary operator if using it makes the code easier to read.<br><div><br><pre>// Good<br>  int minVal = (a &lt; b) ? a : b</pre></div><p></p>

<p>// Bad<br><br>  [self.view addSubview:((currentlyVisibleView == self.photoSelectorView) ? self.textEditorView : self.photoSelectorView)];<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#multi-line-declarations" name="multi-line-declarations" target="_blank" rel="external"></a>Multi Line Declarations</h3><br>Don’t declare a series of variables on one line but rather split them up into individual lines. The reason for this is that splitting them into multiple lines makes the code easier to read and it makes diffs easier to analyze.<br><div><br><pre>// Bad<br>@property (nonatomic, strong) NSString <em>username, </em>url, *password;</pre></div><p></p>

<p>// Good<br><br>@property (nonatomic, strong) NSString <em>username;<br><br>@property (nonatomic, strong) NSString </em>url;<br><br>@property (nonatomic, strong) NSString *password;<br><br></p><h2><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#naming" name="naming" target="_blank" rel="external"></a>Naming</h2><br>Naming rules are very important in maintainable code. Objective-C method names tend to be very long, but this has the benefit that a block of code can almost read like prose, thus rendering many comments unnecessary.<p></p>

<p>When writing pure Objective-C code, we mostly follow standard <a href="http://developer.apple.com/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html" target="_blank" rel="external">Objective-C naming rules</a>.</p>

<p>Any class, category, method, or variable name may use all capitals for initialisms within the name. This follows Apple’s standard of using all capitals within a name for initialisms such as URL, TIFF, and EXIF. An exception to this is when passing a URL as a <em>NSString</em> we prefer to not to use all capitals. The reason for this is that a non all capitalized URL stands out as more obvious that the variable in question is a <em>NSString</em>instead of a <em>NSURL</em>.<br><div><br><pre>- (void)displayWebsite:(NSURL *)websiteURL {<br>  …<br>}</pre></div></p>

<p>- (void)displayWebsite:(NSString *)websiteUrl {<br><br>  …<br><br>}<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#file-names" name="file-names" target="_blank" rel="external"></a>File Names</h3><br>File names should reflect the name of the class implementation that they contain—including case.<p></p>

<p>File names for categories should include the name of the class being extended, e.g. <em>NSString+Helpers.h</em> or <em>UIColors+Helpers.h</em><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#class-names" name="class-names" target="_blank" rel="external"></a>Class Names</h3><br>Class names (along with category and protocol names) should start as uppercase and use mixed case to delimit words.<p></p>

<p>In application-level code, prefixes on class names should generally be avoided. Having every single class with same prefix impairs readability for no benefit. When designing code to be shared across multiple applications, prefixes are acceptable and recommended (e.g.<em>WPXMLRPCEncoder</em>).<br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#objective-c-method-names" name="objective-c-method-names" target="_blank" rel="external"></a>Objective-C Method Names</h3><br>Method names should start as lowercase and then use mixed case. Each named parameter should also start as lowercase.<br><br>The method name should read like a sentence if possible, meaning you should choose parameter names that flow with the method name. (e.g.<em>convertPoint:fromRect</em>: or <em>replaceCharactersInRange:withString:</em>). See <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF" target="_blank" rel="external">Apple’s Guide to Naming Methods</a> for more details.<p></p>

<p>Accessor methods should be named the same as the variable they’re “getting”, but they should not be prefixed with the word “get”. For example:<br><div><br><pre>- (id)getDelegate;  // AVOID<br>- (id)delegate;    // GOOD</pre><br></div><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#variable-names" name="variable-names" target="_blank" rel="external"></a>Variable Names</h3><br>Variables names start with a lowercase and use mixed case to delimit words. Instance variables have leading underscores. For example:<em>myLocalVariable</em>, <em>_myInstanceVariable</em>.<p></p>

<p><strong>Common Variable Names</strong></p>

<p>Do not use Hungarian notation for syntactic attributes, such as the static type of a variable (int or pointer). Give as descriptive a name as possible, within reason. Don’t worry about saving horizontal space as it is far more important to make your code immediately understandable by a new reader. For example:<br><div><br><pre>// Bad<br>int w;<br>int nerr;<br>int nCompConns;<br>tix = [[NSMutableArray alloc] init];<br>obj = [someObject object];<br>p = [network port];</pre></div></p>

<p>// Good<br><br>int numErrors;<br><br>int numCompletedConnections;<br><br>tickets = [[NSMutableArray alloc] init];<br><br>userInfo = [someObject object];<br><br>port = [network port];<br><br><strong>Instance Variables</strong><br>Instance variables are mixed case and should be prefixed with an underscore e.g. <em>_usernameTextField</em>.<br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#comments" name="comments" target="_blank" rel="external"></a>Comments</h3><br>Though a pain to write, they are absolutely vital to keeping our code readable. The following rules describe what you should comment and where. But remember: while comments are very important, the best code is self-documenting. Giving sensible names to types and variables is much better than using obscure names and then trying to explain them through comments.<p></p>

<p>When writing your comments, write for your audience: the next contributor who will need to understand your code. Be generous—the next one may be you!</p>

<p><strong>File Comments</strong><br>A file may optionally start with a description of its contents. Every file should contain the following items, in order:<br><ul><br>    <li>GPL License</li><br>    <li>a basic description of the contents of the file if necessary.</li><br></ul><br>If you make significant changes to a file with an author line, consider deleting the author line since revision history already provides a more detailed and accurate record of authorship.</p>

<p><strong>Declaration Comments</strong><br>Every interface, category, and protocol declaration should have an accompanying comment describing its purpose and how it fits into the larger picture.<br><div><br><pre>// A delegate for NSApplication to handle notifications about app<br>// launch and shutdown. Owned by the main app controller.<br>@interface MyAppDelegate : NSObject {<br>  …<br>}<br>@end</pre><br></div><br>If you have already described an interface in detail in the comments at the top of your file feel free to simply state “See comment at top of file for a complete description”, but be sure to have some sort of comment.Additionally, each method in the public interface should have a comment explaining its function, arguments, return value, and any side effects.</p>

<p>Document the synchronization assumptions the class makes, if any. If an instance of the class can be accessed by multiple threads, take extra care to document the rules and invariants surrounding multithreaded use.<br></p><h2><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#cocoa-and-objective-c-features" name="cocoa-and-objective-c-features" target="_blank" rel="external"></a>Cocoa and Objective-C Features</h2><br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#interface-files" name="interface-files" target="_blank" rel="external"></a>Interface files</h3><br>Interface files should be as short as possible: don’t declare instance variables, and declare only properties and methods that need to be exposed to other classes. Everything else should go into an interface extension inside the implementation file. Remember that you don’t need to declare private methods anymore with a modern Xcode version.<br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#overridden-nsobject-method-placement" name="overridden-nsobject-method-placement" target="_blank" rel="external"></a>Overridden NSObject Method Placement</h3><br>It is strongly recommended and typical practice to place overridden methods of <em>NSObject</em> at the top of an <em>@implementation</em>. This commonly applies (but is not limited) to the <em>init…</em>, <em>copyWithZone:</em>, and <em>dealloc</em> methods. <em>init</em>… methods should be grouped together, followed by the<em>copyWithZone:</em> method, and finally the <em>dealloc</em> method.<br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#initialization" name="initialization" target="_blank" rel="external"></a>Initialization</h3><br>Don’t initialize variables to <em>0</em> or <em>nil</em> in the init method; it’s redundant.<p></p>

<p>All memory for a newly allocated object is initialized to <em>0</em> (except for isa), so don’t clutter up the init method by re-initializing variables to <em>0</em> or <em>nil</em>.<br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#keep-the-public-api-simple" name="keep-the-public-api-simple" target="_blank" rel="external"></a>Keep the Public API Simple</h3><br>Keep your class simple; avoid “kitchen-sink” APIs. If a method doesn’t need to be public, don’t make it so.<br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#use-root-frameworks" name="use-root-frameworks" target="_blank" rel="external"></a>Use Root Frameworks</h3><br>Include root frameworks over individual files.<p></p>

<p>While it may seem tempting to include individual system headers from a framework such as Cocoa or Foundation, in fact it’s less work on the compiler if you include the top-level root framework. The root framework is generally pre-compiled and can be loaded much more quickly. In addition, remember to use #import rather than #include for Objective-C frameworks.<br><div><br><pre>// good<br>#import &lt;Foundation/Foundation.h&gt;</pre></div></p>

<p>// avoid<br><br>#import &lt;Foundation/NSArray.h&gt;<br><br>…<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#avoid-accessors-during-init-and-dealloc" name="avoid-accessors-during-init-and-dealloc" target="_blank" rel="external"></a>Avoid Accessors During init and dealloc</h3><br>Instance subclasses may be in an inconsistent state during <em>init</em> and <em>dealloc</em> method execution, so code in those methods should avoid invoking accessors.<p></p>

<p>Subclasses have not yet been initialized or have already deallocated when <em>init</em> and <em>dealloc</em> methods execute, making accessor methods potentially unreliable. Whenever practical, directly assign to and release ivars in those methods rather than rely on accessors.<br><div><br><pre>// Good</pre></div></p>

<p>- (id)init {<br><br>  self = [super init];<br><br>  if (self) {<br><br>    _bar = [[NSMutableString alloc] init];<br><br>  }<br><br>  return self;<br><br>}</p>

<p>- (void)dealloc {<br><br>  [_bar release];<br><br>  [super dealloc];<br><br>}</p>

<p>// Avoid</p>

<p>- (id)init {<br><br>  self = [super init];<br><br>  if (self) {<br><br>    self.bar = [NSMutableString string];<br><br>  }<br><br>  return self;<br><br>}</p>

<p>- (void)dealloc {<br><br>  self.bar = nil;<br><br>  [super dealloc];<br><br>}<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#setters-copy-nsstrings" name="setters-copy-nsstrings" target="_blank" rel="external"></a>Setters copy NSStrings</h3><br>Setters taking an <em>NSString</em>, should always copy the string it accepts.<p></p>

<p>Never just retain the string. This avoids the caller changing it under you without your knowledge. Don’t assume that because you’re accepting an <em>NSString</em> that it’s not actually an <em>NSMutableString</em>.<br><div><br><pre>- (void)setFoo:(NSString *)aFoo {<br>  [_foo autorelease];<br>  _foo = [aFoo copy];<br>}</pre><br></div><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#nil-checks" name="nil-checks" target="_blank" rel="external"></a>nil Checks</h3><br>Use <em>nil</em> checks for logic flow only.<p></p>

<p>Use <em>nil</em> checks for logic flow of the application, not for crash prevention. Sending a message to a nil object is handled by the Objective-C runtime. If the method has no return result, you’re good to go. However if there is one, there may be differences based on runtime architecture, return size, and OS X version (see Apple’s documentation for specifics).<br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#bool-pitfalls" name="bool-pitfalls" target="_blank" rel="external"></a>BOOL Pitfalls</h3><br>Be careful when converting general integral values to <em>BOOL</em>. Avoid comparing directly with <em>YES</em>.<p></p>

<p><em>BOOL</em> is defined as a signed char in Objective-C which means that it can have values other than <em>YES</em> (1) and <em>NO</em> (0). Do not cast or convert general integral values directly to <em>BOOL</em>. Common mistakes include casting or converting an array’s size, a pointer value, or the result of a bitwise logic operation to a <em>BOOL</em> which, depending on the value of the last byte of the integral result, could still result in a <em>NO</em> value. When converting a general integral value to a <em>BOOL</em> use ternery operators to return a <em>YES</em> or <em>NO</em> value.</p>

<p>You can safely interchange and convert <em>BOOL</em>, <em>_Bool</em> and <em>bool</em> (see C++ Std 4.7.4, 4.12 and C99 Std 6.3.1.2). You cannot safely interchange<em>BOOL</em> and <em>Boolean</em> so treat <em>Booleans</em> as a general integral value as discussed above. Only use <em>BOOL</em> in Objective C method signatures.</p>

<p>Using logical operators (<em>&amp;&amp;</em>, <em>||</em> and <em>!</em>) with <em>BOOL</em> is also valid and will return values that can be safely converted to <em>BOOL</em> without the need for a ternery operator.<br><div><br><pre>// Bad</pre></div></p>

<p>- (BOOL)isBold {<br><br>  return [self fontTraits] &amp; NSFontBoldTrait;<br><br>}<br>- (BOOL)isValid {<br><br>  return [self stringValue];<br><br>}</p>

<p>// Good<br><br>- (BOOL)isBold {<br><br>  return ([self fontTraits] &amp; NSFontBoldTrait) ? YES : NO;<br><br>}<br>- (BOOL)isValid {<br><br>  return [self stringValue] != nil;<br><br>}<br>- (BOOL)isEnabled {<br><br>  return [self isValid] &amp;&amp; [self isBold];<br><br>}<br><br>Also, don’t directly compare <em>BOOL</em> variables directly with <em>YES</em>. Not only is it harder to read for those well-versed in C, the first point above demonstrates that return values may not always be what you expect.<br><div><br><pre>// Bad<br>BOOL great = [foo isGreat];<br>if (great == YES)<br>  // …be great!</pre></div></p>

<p>//Good<br><br>BOOL great = [foo isGreat];<br><br>if (great)<br><br>  // …be great!<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#properties" name="properties" target="_blank" rel="external"></a>Properties</h3><br>Use of the <em>@property</em> directive is preferred. Dot notation is allowed only for access to a declared @property.<p></p>

<p>Use of automatically synthesized instance variables is preferred.</p>

<p><strong>Location</strong></p>

<p>A property’s declaration must come immediately after the instance variable block of a class interface. A property’s definition (if not using automatic synthesis) must come immediately after the <em>@implementation</em> block in a class definition. They are indented at the same level as the<em>@interface</em> or <em>@implementation</em> statements that they are enclosed in.<br><div><br><pre>@interface MyClass : NSObject<br>@property(copy, nonatomic) NSString *name;<br>@end</pre></div></p>

<p></p><p>@implementation MyClass</p><p></p>
<p>- (id)init {<br><br>  …<br><br>}<br>@end<br><br><strong>Use Copy Attribute For Strings</strong><br>NSString properties should always be declared with the <em>copy</em> attribute.This logically follows from the requirement that setters for NSStrings always must use <em>copy</em> instead of <em>retain</em>.</p>

<p><strong>Dot notation</strong><br>Dot notation is idiomatic style for Objective-C 2.0. It may be used when doing simple operations to get and set a <em>@property</em> of an object, but should not be used to invoke other object behavior.<br><div><br><pre>// Good<br>NSString <em>oldName = myObject.name;<br>myObject.name = @”Alice”;<br>NSArray </em>array = [[NSArray arrayWithObject:@”hello”] retain];</pre></div></p>

<p>// Bad<br><br>NSUInteger numberOfItems = array.count;  // not a property<br><br>array.release;                           // not a property<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#interfaces-without-instance-variables" name="interfaces-without-instance-variables" target="_blank" rel="external"></a>Interfaces Without Instance Variables</h3><br>Omit the empty set of braces on interfaces that do not declare any instance variables.<br><div><br><pre>// Good<br>@interface MyClass : NSObject<br>// Does a lot of stuff<br>- (void)fooBarBam;<br>@end</pre></div><p></p>

<p>// Bad<br><br>@interface MyClass : NSObject {<br><br>}<br>// Does a lot of stuff<br><br>- (void)fooBarBam;<br><br>@end<br><br></p><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#nsnumber-nsarray-and-nsdictionary--literals" name="nsnumber-nsarray-and-nsdictionary--literals" target="_blank" rel="external"></a>NSNumber, NSArray and NSDictionary Literals</h3><br>For projects that use Xcode 4.4 or later with clang, the use of NSNumber, NSArray and NSDictionary <a href="http://clang.llvm.org/docs/ObjectiveCLiterals.html" target="_blank" rel="external">literals</a> is allowed and preferred.<p></p>

<p>NSNumber literals are used just like Objective C string literals. Boxing is used when necessary.<br><div><br><pre>// NSNumber<br>NSNumber <em>fortyTwo = @42;<br>NSNumber </em>piOverTwo = @(M_PI / 2);<br>typedef NS_ENUM(NSUInteger, MyEnum) {<br>  MyEnumOne,<br>  MyEnumTwo = 2,<br>};<br>NSNumber *myEnum = @(MyEnumTwo);</pre></div></p>

<p>// NSArray<br><br>NSArray *continents = @[@”North America”, @”South America”, @”Europe”, @”Asia”, @”Africa”, @”Antarctica”, @”Australia”];</p>

<p>// NSDictionary<br><br>NSDictionary <em>personInfo = @{ @”name” : @”John Doe”, @”age” : @(25) };<br><br><h3><a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide#constant-definitions" name="constant-definitions" target="_blank" rel="external"></a>Constant definitions</h3><br>Avoid using <code>#define</code> for constants, they should be defined using <code>const</code>. Constant names should start with an uppercase letter and use mixed case.<br><div><br><pre>// Good<br>NSInteger const ReaderPostsToSync = 20;<br>NSString </pre></div></em>const ReaderLastSyncDateKey = @”ReaderLastSyncDate”;</p>

<p>// Bad<br><br>#define READER_POSTS_TO_SYNC 20;<br><br>#define READER_SYNC_DATE_KEY @”ReaderLastSyncDate”;<br><br>Constants should be defined in the implementation file. If a class needs to expose a constant, it should be defined as <code>extern</code> on the interface file, then initialised in the implementation file:<br><div><br><pre>//  Blog+Jetpack.h<br>extern NSString * const BlogJetpackErrorDomain;</pre></div></p>

<p>//  Blog+Jetpack.m<br><br>NSString * const BlogJetpackErrorDomain = @”BlogJetpackError”;<br><br><br><br><br><br><div id="gollum-footer"><br><p id="last-edit">[转]: <a href="https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide" target="_blank" rel="external">https://github.com/wordpress-mobile/WordPress-iOS/wiki/WordPress-for-iOS-Style-Guide</a></p></div></p>

<p></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/11/01/zhuan-debug-information-format-in-xcode/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/01/zhuan-debug-information-format-in-xcode/" itemprop="url">
                  [转]Debug Information Format in Xcode
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-11-01T00:00:00+08:00">
              2013-11-01
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/01/zhuan-debug-information-format-in-xcode/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/11/01/zhuan-debug-information-format-in-xcode/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><section><br><h3>DEBUG_INFORMATION_FORMAT (Debug Information Format)</h3><br><a name="//apple_ref/doc/uid/TP40003931-CH3-DontLinkElementID_42"></a><a name="//apple_ref/doc/uid/TP40003931-CH3-DontLinkElementID_43"></a><br><div><br><table border="0" cellspacing="0" cellpadding="5"><br><tbody><br><tr><br><td scope="row">Description:</td><br><td>Identifier. Identifies the format used to store the binary’s debug information.</td><br></tr><br><tr><br><td scope="row">Values:</td><br><td><br><ul><br>    <li><code>stabs</code>: Use the Stabs format and place the debug information in the binary.</li><br>    <li><code>dwarf</code>: Use the DWARF format and place the debug information in the binary.</li><br>    <li><code>dwarf-with-dsym</code>: Use the DWARF format and place the debug information in a dSYM file.</li><br></ul><br></td><br></tr><br><tr><br><td scope="row">Default value:</td><br><td><code>dwarf</code></td><br></tr><br><tr><br><td scope="row">Prerequisite for:</td><br><td><a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW7" target="_blank" rel="external">“GCC_ENABLE_SYMBOL_SEPARATION (Separate PCH Symbols).”</a></td><br></tr><br></tbody><br></table><br></div><br></section><section><a title="DEPLOYMENT_POSTPROCESSING (Deployment Postprocessing)" name="//apple_ref/doc/uid/TP40003931-CH3-SW53"></a><a title="DEPLOYMENT_POSTPROCESSING (Deployment Postprocessing)" name="//apple_ref/doc/uid/TP40003931-CH3-SW53"></a><section><br><h3>GCC_ENABLE_SYMBOL_SEPARATION (Separate PCH Symbols)</h3><br><a name="//apple_ref/doc/uid/TP40003931-CH3-DontLinkElementID_120"></a><a name="//apple_ref/doc/uid/TP40003931-CH3-DontLinkElementID_121"></a><br><div><br><table border="0" cellspacing="0" cellpadding="5"><br><tbody><br><tr><br><td scope="row">Description:</td><br><td>Boolean value. Specifies whether the compiler generates a separate file containing the debug symbols when compiling a precompiled (prefix) header (PCH). A separate file with debug symbols can improve build time.</td><br></tr><br><tr><br><td scope="row">Prerequisite:</td><br><td><code>$DEBUG_INFORMATION_FORMAT = stabs AND $GCC_DEBUGGING_SYMBOLS = full</code></td><br></tr><br><tr><br><td scope="row">Values:</td><br><td><br><ul><br>    <li><code>YES</code>: Generates separate file containing debug symbols for a precompiled header.</li><br>    <li><code>NO</code>: Does not generate separate debug symbol file.</li><br></ul><br></td><br></tr><br><tr><br><td scope="row">Default value:</td><br><td><br><ul><br>    <li><code>YES</code>: When <code>$MACH_O_TYPE != staticlib</code>.</li><br>    <li><code>NO</code>: Is the alternative.</li><br></ul><br></td><br></tr><br><tr><br><td scope="row">Effector:</td><br><td><a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW73" target="_blank" rel="external">“MACH_O_TYPE”</a></td><br></tr><br><tr><br><td scope="row">Companions:</td><br><td><a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW52" target="_blank" rel="external">“DEBUG_INFORMATION_FORMAT (Debug Information Format),”</a> <a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW8" target="_blank" rel="external">“GCC_DEBUGGING_SYMBOLS (Level of Debug Symbols).”</a></td><br></tr><br></tbody><br></table><br></div><br></section><a title="DEPLOYMENT_POSTPROCESSING (Deployment Postprocessing)" name="//apple_ref/doc/uid/TP40003931-CH3-SW53"></a><a title="DEPLOYMENT_POSTPROCESSING (Deployment Postprocessing)" name="//apple_ref/doc/uid/TP40003931-CH3-SW53"></a><section><a title="GCC_FEEDBACK_DIRECTED_OPTIMIZATION (Feedback-Directed Optimization)" name="//apple_ref/doc/uid/TP40003931-CH3-SW117"></a></section></section></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/10/29/zhuan-how-to-create-a-static-framework-for-ios/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/10/29/zhuan-how-to-create-a-static-framework-for-ios/" itemprop="url">
                  [转]How to Create a Static Framework for iOS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-10-29T00:00:00+08:00">
              2013-10-29
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/10/29/zhuan-how-to-create-a-static-framework-for-ios/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/10/29/zhuan-how-to-create-a-static-framework-for-ios/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Building a static iOS framework is a pain in the ass. There are a variety of existing solutions already and each one has its own disadvantages. Presented here is a solution that meets all of the following constraints while having no deal-breaking disadvantages.<br><ul><br>    <li>Fast iterative compilation times (up to 3x faster than some solutions!).</li><br>    <li>Easy distribution and packaging.</li><br>    <li>No modifications to Xcode.</li><br>    <li>No trickery with fake bundle targets and the likes.</li><br>    <li>Simple set-up for third-parties.</li><br>    <li>Support for building the framework as a dependent target (i.e. modifying source in the framework and building an app will automatically rebuild the framework and relink as expected).</li><br>    <li>Works with the latest version of Xcode</li><br></ul><br>Shameless plug: if you appreciate high-speed iOS development, check out <a href="http://nimbuskit.info/" target="_blank" rel="external">Nimbus</a>, the iOS framework whose growth is bounded by its documentation.</p>

<p><a href="http://creativecommons.org/licenses/by/3.0/" rel="external" target="_blank"><img alt="Creative Commons License" src="https://github-camo.global.ssl.fastly.net/ea7febd364f01e7b3f46f6fb86712fe05925bfbf/687474703a2f2f692e6372656174697665636f6d6d6f6e732e6f72672f6c2f62792f332e302f38387833312e706e67"></a><br>This work is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/" rel="external" target="_blank">Creative Commons Attribution 3.0 Unported License</a>.<br></p><h1><a href="https://github.com/jverkoey/iOS-Framework#table-of-contents" name="table-of-contents" target="_blank" rel="external"></a>Table of Contents</h1><br><ul><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#existing_solutions" target="_blank" rel="external">Existing Solutions</a></li><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#walkthrough" target="_blank" rel="external">How to Create a Static Framework for iOS</a><br><ul><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#overview" target="_blank" rel="external">Overview</a></li><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#static_library_target" target="_blank" rel="external">Create the Static Library Target</a></li><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#framework_distribution_target" target="_blank" rel="external">Create the Framework Distribution Target</a></li><br></ul><br></li><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#resources" target="_blank" rel="external">Resources and Bundles</a></li><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#third_parties" target="_blank" rel="external">Adding the Framework to a Third-Party Application</a></li><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#first_parties" target="_blank" rel="external">Developing the Framework as a Dependent Project</a></li><br>    <li><a href="https://github.com/jverkoey/iOS-Framework#license" target="_blank" rel="external">License</a></li><br></ul><br><a name="existing_solutions"></a><br><h1><a href="https://github.com/jverkoey/iOS-Framework#existing-solutions" name="existing-solutions" target="_blank" rel="external"></a>Existing Solutions</h1><br>Presented below are a few of the most popular solutions for building static iOS frameworks and the reasons why they should be avoided.<br><blockquote>Note: Though the tone below is largely critical, credit is owed to those who pioneered these solutions. Much of the proposed solution is based off the work that these amazingly generous people have donated to the ether. Thanks!</blockquote><br><h2><a href="https://github.com/jverkoey/iOS-Framework#ios-universal-framework" name="ios-universal-framework" target="_blank" rel="external"></a>iOS-Universal-Framework</h2><br>Source: <a href="https://github.com/kstenerud/iOS-Universal-Framework" target="_blank" rel="external">https://github.com/kstenerud/iOS-Universal-Framework</a><br><h3><a href="https://github.com/jverkoey/iOS-Framework#major-problems" name="major-problems" target="_blank" rel="external"></a>Major problems</h3><br><ul><br>    <li>Slow iterative build times</li><br>    <li>Has to modify Xcode for “Real” frameworks</li><br>    <li>Can’t properly add framework as a dependent target for “Fake” frameworks</li><br>    <li>No adequate solution for resource loading</li><br></ul><br><h3><a href="https://github.com/jverkoey/iOS-Framework#overview" name="overview" target="_blank" rel="external"></a>Overview</h3><br>This project provides two solutions: “fake” frameworks and “real” frameworks.<p></p>

<p>A <strong>fake</strong> framework is a bundle target with a .framework extension and some post-build scripts to generate the fat library for the .framework.</p>

<p>A <strong>real</strong> framework modifies the Xcode installation and generates a true .framework target. Real frameworks also use post-build scripts to generate the fat library.<br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#problems-with-fake-frameworks" name="problems-with-fake-frameworks" target="_blank" rel="external"></a>Problems with Fake Frameworks</h3><br>The problem with a fake framework is that you can’t link to the framework as a dependent target. You can “trick” Xcode into linking to the framework by using the <code>-framework</code> flag in your <code>LD_FLAGS</code>, but changes to the framework will not be reflected in iterative builds. This requires that you clean build every time you modify the framework, or make a trivial modification to the application itself in order for it to forcefully relink to the new .framework. This bug is discussed <a href="https://github.com/kstenerud/iOS-Universal-Framework/issues/32" target="_blank" rel="external">here</a>.<p></p>

<p><em>Example warning when you attempt to link to the .framework target:</em><br><pre><code>warning: skipping file<br>‘/Users/featherless/Library/Developer/Xcode/DerivedData/SimpleApp-cshmhxdgzacibsgaiiryutjzobcb/Build/Products/Debug-iphonesimulator/fakeframework.framework’<br>(unexpected file type ‘wrapper.cfbundle’ in Frameworks &amp; Libraries build phase)<br></code></pre><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#problems-with-real-frameworks" name="problems-with-real-frameworks" target="_blank" rel="external"></a>Problems with Real Frameworks</h3><br>To use real frameworks you need to modify your Xcode installation. This is simply not scalable when you want to work with a team of people. If you use a build farm this problem becomes even worse because it may not be possible to modify the Xcode installations on the build servers.<br><h3><a href="https://github.com/jverkoey/iOS-Framework#problems-with-both-fake-and-real-frameworks" name="problems-with-both-fake-and-real-frameworks" target="_blank" rel="external"></a>Problems with Both Fake and Real Frameworks</h3><br>In both frameworks there is a post-build step that builds the “inverse” platform. For example, if you’re building the framework for i386, the post-build step will build the framework for armv6/armv7/armv7s and then smush the libraries together into one fat binary within the framework. The problem with this is that it <strong>triples</strong> the build time of the framework. Make one change to a .m file and suddenly you’re rebuilding it for three platforms. Change a PCH and your project will effectively perform three clean builds. This is simply not ok from a productivity standpoint.<p></p>

<p>There is also the problem of distributing resources with the .framework. Both the fake and real frameworks include an “embeddedframework” which is meant to be copied into the application. This results in the .framework binary being distributed with the application! Alternatively we could ask developers to only copy what’s in the resources folder to their app, but this is complicated and requires we namespace our resource file names to avoid naming conflicts.<br></p><h2><a href="https://github.com/jverkoey/iOS-Framework#db-ins-solution-fake-frameworks" name="db-ins-solution-fake-frameworks" target="_blank" rel="external"></a>db-in’s solution (“Fake” frameworks)</h2><br>Source: <a href="http://db-in.com/blog/2011/07/universal-framework-iphone-ios-2-0/" target="_blank" rel="external">http://db-in.com/blog/2011/07/universal-framework-iphone-ios-2-0/</a><br><h3><a href="https://github.com/jverkoey/iOS-Framework#major-problems-1" name="major-problems-1" target="_blank" rel="external"></a>Major problems</h3><br><ul><br>    <li>Slow iterative build times</li><br>    <li>Can’t properly add framework as a dependent target</li><br>    <li>No adequate solution for resource loading (recommends a remarkably <em>bad</em> solution)</li><br></ul><br><h3><a href="https://github.com/jverkoey/iOS-Framework#overview-1" name="overview-1" target="_blank" rel="external"></a>Overview</h3><br>db-in’s solution is roughly identical to kstenerud’s solution of using a bundle target to generate a fake framework. This has the same disadvantages as outlined above so I won’t repeat myself.<p></p>

<p>There is, however, a specific deal-breaker with the recommendations in this blog post: resources. Db-in recommends copying the .framework into your application as a resource bundle; this is <b>NOT OK</b>. This will end up copying not just the resources from your framework, but also the fat binary of the framework! Doing this will inflate the size of your application by several megabytes more than it should be because you’re shipping off a fat binary with your application.</p>

<p>And so without further ado…</p>

<p><a name="walkthrough"></a><br></p><h1><a href="https://github.com/jverkoey/iOS-Framework#how-to-create-a-static-framework-for-ios" name="how-to-create-a-static-framework-for-ios" target="_blank" rel="external"></a>How to Create a Static Framework for iOS</h1><br>There are a few constraints that we want to satisfy when building a .framework:<br><ul><br>    <li>Fast iterative builds when developing the framework. We may have a simple application that has the .framework as a dependency and we want to quickly iterate on development of the .framework.</li><br>    <li>Infrequent distribution builds of the .framework.</li><br>    <li>Resource distribution should be intuitive and not bloat the application.</li><br>    <li>Setup for third-party developers using the .framework should be <em>easy</em>.</li><br></ul><br>I believe that the solution I will outline below satisfies each of these constraints. I will outline how to build a .framework project from scratch so that you can apply these steps to an existing project if you so desire. I will also include project templates for easily creating a .framework.<p></p>

<p><a name="overview"></a><br></p><h2><a href="https://github.com/jverkoey/iOS-Framework#overview-2" name="overview-2" target="_blank" rel="external"></a>Overview</h2><br><blockquote>View a sample project that shows the result of following these steps in the <code>sample/Serenity</code> directory.</blockquote><br>Within the project we are going to have three targets: a static library, a bundle, and an aggregate.<p></p>

<p>The static library target will build the source into a static library (.a) and specify which headers will be “public”, meaning they will be accessible from the .framework when we distribute it.</p>

<p>The bundle target will contain all of our resources and will be loadable from the framework.</p>

<p>The aggregate target will build the static library for i386/armv6/armv7/armv7s, generate the fat framework binary, and also build the bundle. You will run this target when you plan to distribute the .framework.</p>

<p>When you are working on the framework you will likely have an internal application that links to the framework. This application will link to the static library target as you normally would and copy the .bundle in the copy resources phase. This has the benefit of only building the framework code for the platform you’re actively working on, significantly improving your build times. We’ll do a little bit of work in the framework project to ensure that you can use your framework in your app the same way a third party developer would (i.e. importing should work as expected). <a href="https://github.com/jverkoey/iOS-Framework#first_parties" target="_blank" rel="external">Jump to the dependent project walkthrough</a>.</p>

<p><a name="static_library_target"></a><br></p><h2><a href="https://github.com/jverkoey/iOS-Framework#create-the-static-library-target" name="create-the-static-library-target" target="_blank" rel="external"></a>Create the Static Library Target</h2><br><h3><a href="https://github.com/jverkoey/iOS-Framework#step-1-create-a-new-cocoa-touch-static-library-project" name="step-1-create-a-new-cocoa-touch-static-library-project" target="_blank" rel="external"></a>Step 1: Create a New “Cocoa Touch Static Library” Project</h3><br><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/newstaticlib.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/newstaticlib.png"></a><p></p>

<p>The product name will be the name of your framework. For example, <code>Serenity</code> will generate<code>Serenity.framework</code> once we’ve set up the project.<br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-2-create-the-primary-framework-header" name="step-2-create-the-primary-framework-header" target="_blank" rel="external"></a>Step 2: Create the Primary Framework Header</h3><br>Developers expect to be able to import your framework by importing the <code>&lt;Serenity/Serenity.h&gt;</code> header. Ensure that your project has such a header (if you created a new static library then there should already be a Serenity.h and Serenity.m file; you can delete the .m).<p></p>

<p>Within this header you are going to import all of the public headers for your framework. For example, let’s assume that we have some <code>Widget</code> with a .h and .m. Our Serenity.h file would look like this:<br><pre><code>#import &lt;Foundation/Foundation.h&gt;</code></pre></p>

<p>#import &lt;Serenity/Widget.h&gt;<br><br>Once you’ve created your framework header file, you need to make it a “public” header. Public headers are headers that will be copied to the .framework and can be imported by those using your framework. This differs from “project” headers which will <em>not</em> be distributed with the framework. This distinction is what allows you to have a concept of public and private APIs.</p>

<p>To change a file’s <a href="http://stackoverflow.com/questions/13571080/cant-change-target-membership-visibility-in-xcode-4-5" target="_blank" rel="external">target membership visibility in XCode 4.4+</a>, you’ll need to select the Static Library target you created (Serenity), open the Build Phases tab:</p>

<p><strong>Xcode 4.X:</strong> Click on Add Build Phase &gt; Add Copy Headers.</p>

<p><strong>Xcode 5:</strong> Add Build Phases from the menu. Click on Editor &gt; Add Build Setting -&gt; Add Copy Headers. Note: If the menu options are grayed out, you’ll need to click on the whitespace below the Build Phases to regain focus and retry.</p>

<p>You’ll see 3 sections for Public, Private, and Project headers. To modify the scope of any header, drag and drop the header files between the sections. Alternatively you can open the Project Navigator and select the header. Next expand the Utilities pane for the File Inspector. <a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/utilitiesbutton.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/utilitiesbutton.png"></a> (Cmd+Option+0).</p>

<p>Look at the “Target Membership” group and ensure that the checkbox next to the .h file is checked. Change the scope of the header from “Project” to “Public”. You might have to uncheck and check the box to get the dropdown list. This will ensure that the header gets copied to the correct location in the copy headers phase.</p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/publicheaders.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/publicheaders.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-3-update-the-public-headers-location" name="step-3-update-the-public-headers-location" target="_blank" rel="external"></a>Step 3: Update the Public Headers Location</h3><br>By default the static library project will copy private and public headers to the same folder:<code>/usr/local/include</code>. To avoid mistakenly copying private headers to our framework we want to ensure that our public headers are copied to a separate directory, e.g. <code>$(PROJECT_NAME)Headers</code>. To change this setting, select the project in the Project Navigator and then click the “Build Settings” tab. Search for “public headers” and then set the “Public Headers Folder Path” to “$(PROJECT_NAME)Headers” for all configurations. If you are working with multiple Frameworks make sure that this folder is unique.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/publicheadersconfig.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/publicheadersconfig.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#ongoing-step-adding-new-sources-to-the-framework" name="ongoing-step-adding-new-sources-to-the-framework" target="_blank" rel="external"></a>Ongoing Step: Adding New Sources to the Framework</h3><br>Whenever you add new source to the framework you must decide whether to expose the .h publicly or not. To modify a header’s scope you will follow the same process as Step 2. By default a header’s scope will be “Project”, meaning it will not be copied to the framework’s public headers.<br><h3><a href="https://github.com/jverkoey/iOS-Framework#step-4-disable-code-stripping" name="step-4-disable-code-stripping" target="_blank" rel="external"></a>Step 4: Disable Code Stripping</h3><br>We do not want to strip any code from the library; we leave this up to the application that is linking to the framework. To disable code stripping we must modify the following configuration settings:<br><pre><code>“Dead Code Stripping” =&gt; No (for all settings)<br>“Strip Debug Symbols During Copy” =&gt; No (for all settings)<br>“Strip Style” =&gt; Non-Global Symbols (for all settings)<br></code></pre><br><h3><a href="https://github.com/jverkoey/iOS-Framework#step-5-prepare-the-framework-for-use-as-a-dependent-target" name="step-5-prepare-the-framework-for-use-as-a-dependent-target" target="_blank" rel="external"></a>Step 5: Prepare the Framework for use as a Dependent Target</h3><br>In order to use the static library as though it were a framework we’re going to generate the basic skeleton of the framework in the static library target. To do this we’ll include a simple post-build script. Add a post-build script by selecting your project in the Project Navigator, selecting the target, and then the “Build Phases” tab.<p></p>

<p><strong>Xcode 4.X:</strong> Click Add Build Phase &gt; Add Run Script</p>

<p><strong>Xcode 5:</strong> Select Editor menu &gt; Add Build Phase &gt; Add Run Script Build Phase</p>

<p>Paste the following script in the source portion of the run script build phase. You can rename the phase by clicking the title of the phase (I’ve named it “Prepare Framework”, for example).<br></p><h4><a href="https://github.com/jverkoey/iOS-Framework#prepare_frameworksh" name="prepare_frameworksh" target="_blank" rel="external"></a>prepare_framework.sh</h4><br><div><br><pre lang="bash" colla="+">set -e</pre></div><p></p>

<p>mkdir -p “${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A/Headers”</p>

<p># Link the “Current” version to “A”<br><br>/bin/ln -sfh A “${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/Current”<br><br>/bin/ln -sfh Versions/Current/Headers “${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Headers”<br><br>/bin/ln -sfh “Versions/Current/${PRODUCT_NAME}” “${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/${PRODUCT_NAME}”</p>

<p># The -a ensures that the headers maintain the source modification date so that we don’t constantly<br><br># cause propagating rebuilds of files that import these headers.<br><br>/bin/cp -a “${TARGET_BUILD_DIR}/${PUBLIC_HEADERS_FOLDER_PATH}/“ “${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A/Headers”<br><br><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/prepareframework.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/prepareframework.png"></a></p>

<p>This will generate the following folder structure:<br><pre><code>– Note: “-&gt;” denotes a symbolic link –</code></pre></p>

<p>Serenity.framework/<br><br>  Headers/ -&gt; Versions/Current/Headers<br><br>  Serenity -&gt; Versions/Current/Serenity<br><br>  Versions/<br><br>    A/<br><br>      Headers/<br><br>        Serenity.h<br><br>        Widget.h<br><br>    Current -&gt; A<br><br>Try building your project now and look at the build products directory (usually<code>~/Library/Developer/Xcode/DerivedData/&lt;ProjectName&gt;-&lt;gibberish&gt;/Build/Products/…</code>). You should see a<code>libSerenity.a</code> static library, a <code>Headers</code> folder, and a <code>Serenity.framework</code> folder that contains the basic skeleton of your framework.</p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/buildphase1.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/buildphase1.png"></a></p>

<p><a name="framework_distribution_target"></a><br></p><h2><a href="https://github.com/jverkoey/iOS-Framework#create-the-framework-distribution-target" name="create-the-framework-distribution-target" target="_blank" rel="external"></a>Create the Framework Distribution Target</h2><br>When actively developing the framework we only care to build the platform that we’re testing on. For example, if we’re testing on the iPhone simulator then we only need to build the i386 platform.<p></p>

<p>This changes when we want to distribute the framework to third party developers. The third-party developers don’t have the option of rebuilding the framework for each platform, so we must provide what is called a “fat binary” version of the static library that is comprised of the possible platforms. These platforms include: i386, armv6, armv7, and armv7s.</p>

<p>To generate this fat binary we’re going to build the static library target for each platform.<br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-1-create-an-aggregate-target" name="step-1-create-an-aggregate-target" target="_blank" rel="external"></a>Step 1: Create an Aggregate Target</h3><br>Click File &gt; New Target &gt; iOS &gt; Other and create a new Aggregate target. Title it something like “Framework”.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/aggregatetarget.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/aggregatetarget.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-2-add-the-static-library-as-a-dependent-target" name="step-2-add-the-static-library-as-a-dependent-target" target="_blank" rel="external"></a>Step 2: Add the Static Library as a Dependent Target</h3><br>Add the static library target to the “Target Dependencies”.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/targetdependencies.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/targetdependencies.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-3-build-the-other-platform" name="step-3-build-the-other-platform" target="_blank" rel="external"></a>Step 3: Build the Other Platform</h3><br>To build the other platform we’re going to use a “Run Script” phase to execute some basic commands. Add a new “Run Script” build phase to your aggregate target and paste the following code into it.<br><h4><a href="https://github.com/jverkoey/iOS-Framework#build_frameworksh" name="build_frameworksh" target="_blank" rel="external"></a>build_framework.sh</h4><br><div><br><pre lang="bash" colla="+">set -e<br>set +u<br># Avoid recursively calling this script.<br>if [[ $SF_MASTER_SCRIPT_RUNNING ]]<br>then<br>    exit 0<br>fi<br>set -u<br>export SF_MASTER_SCRIPT_RUNNING=1</pre></div><p></p>

<p>SF_TARGET_NAME=${PROJECT_NAME}<br><br>SF_EXECUTABLE_PATH=”lib${SF_TARGET_NAME}.a”<br><br>SF_WRAPPER_NAME=”${SF_TARGET_NAME}.framework”</p>

<p># The following conditionals come from<br><br># <a href="https://github.com/kstenerud/iOS-Universal-Framework" target="_blank" rel="external">https://github.com/kstenerud/iOS-Universal-Framework</a></p>

<p>if [[ “$SDK_NAME” =~ ([A-Za-z]+) ]]<br><br>then<br><br>    SF_SDK_PLATFORM=${BASH_REMATCH[1]}<br><br>else<br><br>    echo “Could not find platform name from SDK_NAME: $SDK_NAME”<br><br>    exit 1<br><br>fi</p>

<p>if [[ “$SDK_NAME” =~ ([0-9]+.*$) ]]<br><br>then<br><br>    SF_SDK_VERSION=${BASH_REMATCH[1]}<br><br>else<br><br>    echo “Could not find sdk version from SDK_NAME: $SDK_NAME”<br><br>    exit 1<br><br>fi</p>

<p>if [[ “$SF_SDK_PLATFORM” = “iphoneos” ]]<br><br>then<br><br>    SF_OTHER_PLATFORM=iphonesimulator<br><br>else<br><br>    SF_OTHER_PLATFORM=iphoneos<br><br>fi</p>

<p>if [[ “$BUILT_PRODUCTS_DIR” =~ (.*)$SF_SDK_PLATFORM$ ]]<br><br>then<br><br>    SF_OTHER_BUILT_PRODUCTS_DIR=”${BASH_REMATCH[1]}${SF_OTHER_PLATFORM}”<br><br>else<br><br>    echo “Could not find platform name from build products directory: $BUILT_PRODUCTS_DIR”<br><br>    exit 1<br><br>fi</p>

<p># Build the other platform.<br><br>xcodebuild -project “${PROJECT_FILE_PATH}” -target “${TARGET_NAME}” -configuration “${CONFIGURATION}” -sdk ${SF_OTHER_PLATFORM}${SF_SDK_VERSION} BUILD_DIR=”${BUILD_DIR}” OBJROOT=”${OBJROOT}” BUILD_ROOT=”${BUILD_ROOT}” SYMROOT=”${SYMROOT}” $ACTION</p>

<p># Smash the two static libraries into one fat binary and store it in the .framework<br><br>lipo -create “${BUILT_PRODUCTS_DIR}/${SF_EXECUTABLE_PATH}” “${SF_OTHER_BUILT_PRODUCTS_DIR}/${SF_EXECUTABLE_PATH}” -output “${BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}”</p>

<p># Copy the binary to the other architecture folder to have a complete framework in both.<br><br>cp -a “${BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}” “${SF_OTHER_BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}”<br><br></p><h4><a href="https://github.com/jverkoey/iOS-Framework#important-note" name="important-note" target="_blank" rel="external"></a>Important Note</h4><br>The above script assumes that your library name matches your project name in the following line:<br><div><br><pre>SF_TARGET_NAME=${PROJECT_NAME}</pre><br></div><br>If this is not the case (e.g. your xcode project is named SerenityFramework and the target name is Serenity) then you need to explicitly set the target name on that line. For example:<br><div><br><pre>SF_TARGET_NAME=Serenity</pre><br></div><br><h3><a href="https://github.com/jverkoey/iOS-Framework#step-4-build-and-verify" name="step-4-build-and-verify" target="_blank" rel="external"></a>Step 4: Build and Verify</h3><br>You now have everything set up to build a distributable .framework to third-party developers. Try building the aggregate target. Once it’s done, expand the Products folder in Xcode, right click the static library and click “Show in Finder”. If this doesn’t open Finder to where the static library exists then try opening<code>~/Library/Developer/Xcode/DerivedData/&lt;project name&gt;/Build/Products/Debug-iphonesimulator/</code>.<p></p>

<p>Within this folder you will see your .framework folder.</p>

<p>You can now drag the .framework elsewhere, zip it up, upload it, and distribute it to your third-party developers.</p>

<p><a name="resources"></a><br></p><h1><a href="https://github.com/jverkoey/iOS-Framework#resources-and-bundles" name="resources-and-bundles" target="_blank" rel="external"></a>Resources and Bundles</h1><br>To distribute resources with a framework, we are going to provide the developer with a separate .bundle that contains all of the strings and resources. This distribution method provides a number of advantages over including the resources in the .framework itself.<br><ul><br>    <li>Encapsulation of resources. We can scope resource loading to our framework’s bundle.</li><br>    <li>Easy to add bundles to projects.</li><br>    <li>The developer doesn’t have to copy the entire .framework into their application.</li><br></ul><br>The hard part about bundles is creating the target. Xcode’s bundle target doesn’t actually create a loadable bundle object, so we have to do some post-build massaging of the bundle. It’s important that we create a bundle target because we need to create the bundle using the Copy Bundle Resources phase that will correctly compile .xib files (a Copy Files phase does not accomplish this!).<br><h3><a href="https://github.com/jverkoey/iOS-Framework#step-1-create-the-bundle-target" name="step-1-create-the-bundle-target" target="_blank" rel="external"></a>Step 1: Create the Bundle Target</h3><br>In the framework project, create a new bundle target. Click on File &gt; New &gt; Target &gt; OS X &gt; Bundle. You will need to name the bundle something different from your framework name or Xcode will not let you create the target. I’ve named the target SerenityResources. We will rename the output of the target to Serenity.bundle in a following step.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/newbundletarget.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/newbundletarget.png"></a></p>

<p>Ensure that the Framework setting is set to “Core Foundation”.</p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/newbundletarget2.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/newbundletarget2.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-2-clean-up-the-bundle-target-settings" name="step-2-clean-up-the-bundle-target-settings" target="_blank" rel="external"></a>Step 2: Clean up the Bundle Target Settings</h3><br>By default the bundle will only show build settings for Mac OS X. It doesn’t really matter what it builds for because the bundle isn’t actually going to have any code in it, but I prefer to have things nice and consistent. Open the bundle target settings and delete the settings for Architectures, Base SDK, and Build Active Architecture Only.<p></p>

<p><strong>Xcode 5:</strong> Deleting a build setting will reset it to the Project’s build setting. It should switch from OS X to iOS.</p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/bundlesettings.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/bundlesettings.png"></a></p>

<p>This is also when you should change your bundle target’s product name to the name of your framework rather than the target name. Click on your project in the Project Navigator and then select the bundle target. Click Build Settings, search for “Product Name”, and then replace the value of Product Name with the name of your framework (e.g. $(TARGET_NAME) replaced by Serenity)</p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/serenityproductname.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/serenityproductname.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-3-remove-hidpi-mac-os-x-build-setting" name="step-3-remove-hidpi-mac-os-x-build-setting" target="_blank" rel="external"></a>Step 3: Remove HIDPI Mac OS X Build Setting</h3><br>We created a OS X Bundle and it includes and option to merge HIDPI (retina and non-retina) art assets into a .tiff file. You don’t want this behavior and need to disable it, or you will be unable to load your image assets from the bundle.<p></p>

<p>In the Bundle target go to Build Settings and search for <code>COMBINE_HIDPI_IMAGES</code> and delete the user defined setting. When you build, verify that your @2x.png and .png images are all in the bundle.</p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/delete_combine_hidpi.png" target="_blank"><img alt="Delete the COMBINE_HIDPI_IMAGES setting" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/delete_combine_hidpi.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#ongoing-step-add-resources-to-the-bundle-target-copy-files-phase" name="ongoing-step-add-resources-to-the-bundle-target-copy-files-phase" target="_blank" rel="external"></a>Ongoing Step: Add Resources to the Bundle Target Copy Files Phase</h3><br>Whenever you add new resources that you want to include with your framework you need to add it to the bundle target that you created.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/newbundleresource.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/newbundleresource.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-4-add-the-bundle-target-to-your-aggregate-target" name="step-4-add-the-bundle-target-to-your-aggregate-target" target="_blank" rel="external"></a>Step 4: Add the Bundle Target to your Aggregate Target</h3><br>Whenever we build the framework for distribution we likely also want to build the bundle. Add the bundle target to your aggregate target’s dependencies.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/bundledependency.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/bundledependency.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-5-loading-bundle-resources" name="step-5-loading-bundle-resources" target="_blank" rel="external"></a>Step 5: Loading Bundle Resources</h3><br>In order to load bundle resources, we must first ask the third-party developer to add the .bundle to their application. To do so they will simply drag the .bundle that you distributed with the .framework to their project and ensure that it is copied in the copy files phase of their app target.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/addbundle.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/addbundle.png"></a></p>

<p>To load resources from the bundle we will use the following code:<br><div><br><pre lang="objc" colla="+">// Load the framework bundle.<br>+ (NSBundle <em>)frameworkBundle {<br>  static NSBundle</em> frameworkBundle = nil;<br>  static dispatch_once_t predicate;<br>  dispatch_once(&amp;predicate, ^{<br>    NSString<em> mainBundlePath = [[NSBundle mainBundle] resourcePath];<br>    NSString</em> frameworkBundlePath = [mainBundlePath stringByAppendingPathComponent:@”Serenity.bundle”];<br>    frameworkBundle = [[NSBundle bundleWithPath:frameworkBundlePath] retain];<br>  });<br>  return frameworkBundle;<br>}</pre></div></p>

<p>[UIImage imageWithContentsOfFile:[[[self class] frameworkBundle] pathForResource:@”image” ofType:@”png”]];<br><br>You can see an example of loading a resource from within the framework in the Widget object in the included Serenity framework.</p>

<p><strong>Xcode 5:</strong> Do not use the Asset Catalog for any resources within a bundle. On an iOS 7.0 only project, a bug causes the pathForResource method to return nil.</p>

<p><a name="third_parties"></a><br></p><h1><a href="https://github.com/jverkoey/iOS-Framework#adding-the-framework-to-a-third-party-application" name="adding-the-framework-to-a-third-party-application" target="_blank" rel="external"></a>Adding the Framework to a Third-Party Application</h1><br><blockquote>View a sample project that shows the result of following these steps in the <code>sample/ThirdParty</code> directory.</blockquote><br>This is the easy part (and what your third-party developers will have to do). Simply drag the .framework to your application’s project, ensuring that it’s being added to the necessary targets.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/thirdparty.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/thirdparty.png"></a></p>

<p>Import your framework header and you’re kickin’ ass.<br><div><br><pre>#import &lt;Serenity/Serenity.h&gt;</pre><br></div><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#resources" name="resources" target="_blank" rel="external"></a>Resources</h3><br>If you’re distributing resources with your framework then you will also send the .bundle file to the developers. The developer will then drag the .bundle file into their application and ensure that it’s added to the application target.<p></p>

<p><a name="first_parties"></a><br></p><h1><a href="https://github.com/jverkoey/iOS-Framework#developing-the-framework-as-a-dependent-project" name="developing-the-framework-as-a-dependent-project" target="_blank" rel="external"></a>Developing the Framework as a Dependent Project</h1><br><blockquote>View a sample project that shows the result of following these steps in the <code>sample/DependentApp</code>directory.</blockquote><br>When developing the framework you want to minimize build times while ensuring that your experience roughly matches that of your third-party developers. We achieve this balance by only building the static library but treating the static library as though it were a framework.<br><h3><a href="https://github.com/jverkoey/iOS-Framework#step-1-add-the-framework-project-to-your-application-project" name="step-1-add-the-framework-project-to-your-application-project" target="_blank" rel="external"></a>Step 1: Add the Framework Project to your Application Project</h3><br>To add the framework as a dependent target in your application, from Finder drag the framework’s .xcodeproj to Xcode and drop it in your application’s frameworks folder. This will add a reference to the framework’s xcodeproj folder.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/dependentapp.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/dependentapp.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-2-make-the-framework-static-library-target-a-dependency" name="step-2-make-the-framework-static-library-target-a-dependency" target="_blank" rel="external"></a>Step 2: Make the Framework Static Library Target a Dependency</h3><br>Once you’ve added the framework project to your app you can add the static library product as a dependency. Select your project in the Project Navigator and open the “Build Phases” tab. Expand the “Target Dependencies” group and click the + button. Select the static library target and click “Add”.<p></p>

<p><strong>Note:</strong> Close your Static Library Project or the dependencies will not appear in the list. You can only have one instance of an Xcode project open.</p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/addtarget.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/addtarget.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-3-link-your-application-with-the-framework-static-library" name="step-3-link-your-application-with-the-framework-static-library" target="_blank" rel="external"></a>Step 3: Link your Application with the Framework Static Library</h3><br>In order to use the framework’s static library we must link it into the application. Expand the “Link Binary With Libraries” phase and click the + button. Select the <code>.a</code> file that’s exposed by your framework’s project and then click add.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/linker.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/linker.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-4-import-the-framework-header" name="step-4-import-the-framework-header" target="_blank" rel="external"></a>Step 4: Import the Framework Header</h3><br>You now simply need to import the framework header somewhere in your project. I generally prefer the pch so that I don’t have to clutter up my application’s source with framework headers, but you can obviously choose whatever practice suits your needs.<br><div><br><pre>#import &lt;Serenity/Serenity.h&gt;</pre><br></div><br><h3><a href="https://github.com/jverkoey/iOS-Framework#step-4-b-adding-resources" name="step-4-b-adding-resources" target="_blank" rel="external"></a>Step 4-b: Adding Resources</h3><br>If you are developing resources for your framework you can also add the bundle target as a dependency.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/bundledependency2.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/bundledependency2.png"></a></p>

<p>You must then add the bundle to the Copy Bundle Resources phase of your application by expanding the products folder of your framework product and dragging the .bundle into that section.</p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/bundlecopy.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/bundlecopy.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-5-check-dependent-target-build-settings" name="step-5-check-dependent-target-build-settings" target="_blank" rel="external"></a>Step 5: Check Dependent Target Build Settings</h3><br>Set the setting <code>Skip Install</code> to <code>Yes</code> for any static library or bundle target that you create. Check all the targets that are dependencies of your application project. If the option is <code>No</code> then you will be unable to build an archive of the project containing the target dependencies. Xcode will create a Generic Xcode Archive, which cannot be shared adhoc, validated, or submitted.<p></p>

<p><a href="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/skip_install.png" target="_blank"><img alt="" src="https://github.com/jverkoey/iOS-Framework/raw/master/gfx/skip_install.png"></a><br></p><h3><a href="https://github.com/jverkoey/iOS-Framework#step-6-build-and-test" name="step-6-build-and-test" target="_blank" rel="external"></a>Step 6: Build and Test</h3><br>Build your application and verify a couple things:<br><ul><br>    <li>Your framework should be built before your application.</li><br>    <li>Your framework should be linked into the application.</li><br>    <li>You shouldn’t get any compiler or linker errors.</li><br></ul><p></p>

<p>[转自]:<a href="https://github.com/jverkoey/iOS-Framework" target="_blank" rel="external">https://github.com/jverkoey/iOS-Framework</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/10/25/zhuan-duan-url-sheng-cheng-zhuan-huan/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/10/25/zhuan-duan-url-sheng-cheng-zhuan-huan/" itemprop="url">
                  [转]短URL生成转换
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-10-25T00:00:00+08:00">
              2013-10-25
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/10/25/zhuan-duan-url-sheng-cheng-zhuan-huan/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/10/25/zhuan-duan-url-sheng-cheng-zhuan-huan/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>主要逻辑：</p>

<p>1, 确定一个包括大小写字母、数据的字符串LS，长度为 L = 26+26+10 = 62</p>

<p>2, 初始化L**N个整数，并作为一个序列push到redis里</p>

<p>3, 当需要转换一个长URL时，先从以上的序列中随机pop出一个整数I</p>

<p>4, 对整数I取模（除数为L)，余数对应到LS的一个字母，取完模后再除以L取整，当结果等于0时停止除模，否则结果继续取模。</p>

<p>5, 将所有余数对应的字母按顺序排列得到一个简短的字符串SS</p>

<p>6, 将长URL的md5哈希值作为KEY，将字符串SS作为VALUE，写入redis</p>

<p>7, 将字符串SS作为KEY, 将长URL作为VALUE，写入redis</p>

<p>8, 将前缀(短url域名)加上字符串SS，作为短URL结果返回</p>

<p>9, 当用户使用短url访问时，将短URL中的字符串SS取出，并作为KEY从redis中取出长URL，跳转长URL</p>

<p>注意：</p>

<p>当redis中序列数字快使用完时，要及时增加（可以写个脚本随时监控，数量少于10%时就自动增加数量），切忌不能存已经用过的数字</p>

<p><pre lang="Python" colla="+"><br>#encoding=utf-8<br>import string<br>import redis<br>import hashlib<br><br>LETTERS = string.digits + string.ascii_letters<br>LETTERS_NUM = len(LETTERS)<br>COUNTER_KEY = ‘url:counter’<br><br>def init(rd,num):<br>    for i in xrange(LETTERS_NUM * num):<br>        rd.sadd(‘url:id:set’,i)<br><br>#通过urlid取得短url对应的字符串<br>def get_url(urlid):<br>        result = []<br>        q = urlid/LETTERS_NUM<br>        r = urlid%LETTERS_NUM<br>        result.append(LETTERS[r])<br>        while q:<br>            r = q%LETTERS_NUM<br>            q = q/LETTERS_NUM<br>            result = [LETTERS[r]] + result<br>        return ‘’.join(result)<br><br>#得到短url字符串<br>def parse_url(rd, longurl):<br>    ret = longurl<br>    if (longurl.startswith(“http://“) or longurl.startswith(“https://“)) and len(longurl)&gt;7:<br>        m = hashlib.md5()<br>        m.update(longurl)<br>        urlkey = m.digest()<br>        old_param = rd.get(urlkey)<br>        if old_param:<br>            ret = old_param<br>        else:<br>            urlid = int(rd.spop(‘url:id:set’))<br>            param = get_url(urlid)<br>            rd.incr(COUNTER_KEY, 1)<br>            rd.set(param,longurl)<br>            rd.set(urlkey,param)<br>            ret = param<br>    print “short url:”,ret<br>    return ret<br><br>if <strong>name</strong> == “<strong>main</strong>“:<br>    url = “<a href="http://www.google.com/" target="_blank" rel="external">http://www.google.com/</a>“<br>    rd = redis.Redis(‘127.0.0.1’,6379,db=0)<br>    init(rd,3)<br>    parse_url(rd,url)<br></pre><br>[转自]：<a href="http://sls0919.iteye.com/blog/1774239" target="_blank" rel="external">http://sls0919.iteye.com/blog/1774239</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2013/10/17/qualification-round-2008-problem-a-saving-the-universe/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/10/17/qualification-round-2008-problem-a-saving-the-universe/" itemprop="url">
                  Qualification Round 2008 Problem A. Saving The Universe
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-10-17T23:57:39+08:00">
              2013-10-17
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/10/17/qualification-round-2008-problem-a-saving-the-universe/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/10/17/qualification-round-2008-problem-a-saving-the-universe/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Problem</p>
<p>The urban legend goes that if you go to the Google homepage and search for “Google”, the universe will implode. We have a secret to share… It is true! Please don’t try it, or tell anyone. All right, maybe not. We are just kidding.</p>
<p>The same is not true for a universe far far away. In that universe, if you search on any search engine for that search engine’s name, the universe does implode!</p>
<p>To combat this, people came up with an interesting solution. All queries are pooled together. They are passed to a central system that decides which query goes to which search engine. The central system sends a series of queries to one search engine, and can switch to another at any time. Queries must be processed in the order they’re received. The central system must never send a query to a search engine whose name matches the query. In order to reduce costs, the number of switches should be minimized.</p>
<p>Your task is to tell us how many times the central system will have to switch between search engines, assuming that we program it optimally.</p>
<p>Input</p>
<p>The first line of the input file contains the number of cases, N. N test cases follow.</p>
<p>Each case starts with the number S – the number of search engines. The next S lines each contain the name of a search engine. Each search engine name is no more than one hundred characters long and contains only uppercase letters, lowercase letters, spaces, and numbers. There will not be two search engines with the same name.</p>
<p>The following line contains a number Q – the number of incoming queries. The next Qlines will each contain a query. Each query will be the name of a search engine in the case.</p>
<p>Output</p>
<p>For each input case, you should output:</p>
<p>Case #X: Y</p>
<p>where X is the number of the test case and Y is the number of search engine switches. Do not count the initial choice of a search engine as a switch.</p>
<p>Limits</p>
<p>0 &lt; N ≤ 20</p>
<p>Small dataset</p>
<p>2 ≤ S ≤ 10</p>
<p>0 ≤ Q ≤ 100</p>
<p>Large dataset</p>
<p>2 ≤ S ≤ 100</p>
<p>0 ≤ Q ≤ 1000</p>
<p>Sample</p>
<table>
<thead>
<tr>
<th style="text-align:center">input</th>
<th style="text-align:center">output</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">Case #1: 1</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">Case #2: 0</td>
</tr>
<tr>
<td style="text-align:center">Yeehaw</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">NSM</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Dont Ask</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">B9</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Googol</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Yeehaw</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Yeehaw</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Googol</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">B9</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Googol</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">NSM</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">B9</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">NSM</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Dont Ask</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Googol</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Yeehaw</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">NSM</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Dont Ask</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">B9</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Googol</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Googol</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Dont Ask</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">NSM</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">NSM</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Yeehaw</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Yeehaw</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Googol</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>In the first case, one possible solution is to start by using Dont Ask, and switch to NSM after query number 8.<br>For the second case, you can use B9, and not need to make any switches.</p>
<p>[Analysis]<br>The first task in the new Google Code Jam is about, no surprise, search engines, and also, the grandiose feat of saving the universe in a parsimonious way. However, putting all the fancies aside, the problem itself is easy.</p>
<p>List all queries one by one, and break them up into segments. Each segment will be an interval where we use one search engine, and when we cross from one segment to another we will switch the search engine we use. What can you say about each segment? Well, one thing for sure is:</p>
<p>Never ever ever have all S different search engines appear as queries in one segment. (<em>)<br>Why is this? Because if all S names appeared in one segment, then any search engine used for that segment will encounter at least one query that is the same as its name, thus exploding the universe!<br>Working in the opposite direction, (</em>) is all we need to achieve; as long as you can partition the list of queries into such segments, it corresponds to a plan of saving the universe. You don’t even care about which engine is used for one segment; any engine not appearing as a query on that segment will do. However, you might sometimes pick the same engine for two consecutive segments, laughing at yourself when you realize it; why don’t I just join the two segments into one? Because your task is to use as few segments as possible, it is obvious that you want to make each segment as long as possible.</p>
<p>This leads to the greedy solution: Starting from the first query, add one query at a time to the current segment until the names of all S search engines have been encountered. Then we continue this process in a new segment until all queries are processed.</p>
<p>Sample code in C++, where st is the set of queries in the current segment, q is the next query, and count is the number of switches.</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">st.clear();</div><div class="line">count = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;Q; i++) &#123;</div><div class="line">	getline(cin, q);</div><div class="line">	<span class="keyword">if</span> (st.find(q) == st.end()) &#123;</div><div class="line">		<span class="keyword">if</span> (st.size() == S<span class="number">-1</span>) &#123;</div><div class="line">			st.clear();</div><div class="line">			count++;</div><div class="line">		&#125;</div><div class="line">		st.insert(q);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If st is a hashset, you expect the solution run in O(n) time. Note that this solution uses the fact that each query will be a search engine name and so we can ignore the list of names provided in the input.<br>Let us justify that the greedy approach always gives the optimal answer. Think of the procedure as Q steps, and we want to show that, for each i, there is (at least) one optimal choice which agrees with us on the first i steps. We do this inductively for i = 0, then i = 1, and so on. The proposition for i = Q when proven true will imply that our algorithm is correct.</p>
<p>So, the key points in the inductive step i:<br>If adding the next query will explode the universe, we must start a new segment. Any optimal choice agrees with us for the first (i-1) steps must also do that.<br>If adding the next query will not explode the universe, we do not start a new segment. We know there is an optimal solution R agreed with us for (i-1) steps. Even if in R a new segment is started at step i, we can modify it a little bit. Let R’ be the plan that agrees with R, but instead of starting a new segment on the i-th step, we delay this to the (i+1)st. It is clear that R’ will also make the universe safe, and has no more switches than R does. So, R’ is also an optimal solution, and agrees with our choice for the first i steps.<br>The similar lines of justifications work for many greedy algorithms, including the well beloved minimum spanning trees.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// CodeJamPratice.cpp : Defines the entry point for the console application.</span></div><div class="line"><span class="comment">//</span></div><div class="line"> </div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> </span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> </span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> </span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> </span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> </span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> </span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"> </div><div class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"../debug/A-large-practice.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"../debug/A-large-practice.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line"> </div><div class="line">	<span class="keyword">int</span> numCase;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;amp;numCase);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> c = <span class="number">0</span>; c &amp;lt; numCase; c++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> engineCount = <span class="number">0</span>;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;amp;engineCount);</div><div class="line"> </div><div class="line">		<span class="built_in">vector</span> engines;</div><div class="line"> </div><div class="line">		<span class="keyword">char</span> tmp[<span class="number">100</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">		gets(tmp);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; engineCount; i++)</div><div class="line">		&#123;</div><div class="line">			gets(tmp);</div><div class="line">			<span class="built_in">string</span> str = <span class="built_in">string</span>(tmp);</div><div class="line">			engines.push_back(str);</div><div class="line">		&#125;</div><div class="line"> </div><div class="line">		<span class="built_in">vector</span> st;</div><div class="line">		<span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">		<span class="keyword">int</span> queueSize = <span class="number">0</span>;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;amp;queueSize);</div><div class="line">		gets(tmp);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; queueSize; i++)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">char</span> tmp[<span class="number">100</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">			gets(tmp);</div><div class="line">			<span class="built_in">string</span> str = <span class="built_in">string</span>(tmp);</div><div class="line">			<span class="built_in">vector</span>::iterator iter = st.begin();</div><div class="line"> </div><div class="line">			<span class="keyword">bool</span> found = <span class="literal">false</span>;</div><div class="line">			<span class="keyword">for</span>(; iter != st.end(); iter++)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span>(iter-&amp;gt;compare(str) == <span class="number">0</span>)</div><div class="line">					found = <span class="literal">true</span>;</div><div class="line">			&#125;</div><div class="line"> </div><div class="line">			<span class="keyword">if</span>(found == <span class="literal">false</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span>(st.size() == engineCount - <span class="number">1</span>)</div><div class="line">				&#123;</div><div class="line">					st.clear();</div><div class="line">					count++;</div><div class="line">				&#125;</div><div class="line">				st.push_back(str);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"> </div><div class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, c+<span class="number">1</span>, count);</div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	fclose(<span class="built_in">stdin</span>);</div><div class="line">	fclose(<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar/avatar.jpg"
               alt="姜楠" />
          <p class="site-author-name" itemprop="name">姜楠</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">118</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/njiang1987" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  github
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">姜楠</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"njiang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
