<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="layout: posttitle: “Add customize commander into Facebook Chisel”date: 2014-05-11 10:13:51 +0800comments: truecategories: 技术
tags: lldb1. How the chisel initWhen the lldb init, it will location the f">
<meta property="og:type" content="article">
<meta property="og:title" content="天空の城">
<meta property="og:url" content="http://www.njiang.cn/2014/05/11/add-customize-commander-into-facebook-chisel/index.html">
<meta property="og:site_name" content="天空の城">
<meta property="og:description" content="layout: posttitle: “Add customize commander into Facebook Chisel”date: 2014-05-11 10:13:51 +0800comments: truecategories: 技术
tags: lldb1. How the chisel initWhen the lldb init, it will location the f">
<meta property="og:image" content="http://www.njiang.cn/uploads/2014-05-11/1.png">
<meta property="og:image" content="http://www.njiang.cn/uploads/2014-05-11/2.png">
<meta property="og:updated_time" content="2016-12-26T08:40:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="天空の城">
<meta name="twitter:description" content="layout: posttitle: “Add customize commander into Facebook Chisel”date: 2014-05-11 10:13:51 +0800comments: truecategories: 技术
tags: lldb1. How the chisel initWhen the lldb init, it will location the f">
<meta name="twitter:image" content="http://www.njiang.cn/uploads/2014-05-11/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.njiang.cn/2014/05/11/add-customize-commander-into-facebook-chisel/"/>





  <title>  | 天空の城 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-43682645-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">天空の城</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">愤怒的程序员，梦想着有一天也能飞！</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.njiang.cn/2014/05/11/add-customize-commander-into-facebook-chisel/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="姜楠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="天空の城">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="天空の城" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-05-11T00:00:00+08:00">
              2014-05-11
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2016-12-26T16:40:34+08:00">
              2016-12-26
            </time>
            
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/05/11/add-customize-commander-into-facebook-chisel/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/05/11/add-customize-commander-into-facebook-chisel/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <hr>
<p>layout: post<br>title: “Add customize commander into Facebook Chisel”<br>date: 2014-05-11 10:13:51 +0800<br>comments: true<br>categories: 技术</p>
<h2 id="tags-lldb"><a href="#tags-lldb" class="headerlink" title="tags: lldb"></a>tags: lldb</h2><h2 id="1-How-the-chisel-init"><a href="#1-How-the-chisel-init" class="headerlink" title="1. How the chisel init"></a>1. How the chisel init</h2><p>When the lldb init, it will location the file <code>~/.lldbinit</code>, this is the API to add extend commander into lldb. In this file, there is a commander like:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">command</span> script import ~/chisel/fblldb.py</div></pre></td></tr></table></figure></p>
<p>This commander means it will import the script ~/chisel/fblldb.py. Let’s look into fblldb.py. There is lldb callback function named <code>__lldb_init_module</code>. Its function is load python funciton into lldb. Facebook add logic to fecth all the commanders under folder commands. After find all the commander, it will use following command to load them into lldb.  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">loadCommand</span><span class="params">(module, command, directory, filename, extension)</span>:</span></div><div class="line">  func = makeRunCommand(command, os.path.join(directory, filename + extension))</div><div class="line">  name = command.name()</div><div class="line">  </div><div class="line">  key = filename + <span class="string">'_'</span> + name</div><div class="line">  </div><div class="line">  module._loadedFunctions[key] = func</div><div class="line">  </div><div class="line">  functionName = <span class="string">'__'</span> + key</div><div class="line"></div><div class="line">  lldb.debugger.HandleCommand(<span class="string">'script '</span> + functionName + <span class="string">' = sys.modules[\''</span> + module.__name__ + <span class="string">'\']._loadedFunctions[\''</span> + key + <span class="string">'\']'</span>)</div><div class="line">  lldb.debugger.HandleCommand(<span class="string">'command script add -f '</span> + functionName + <span class="string">' '</span> + name)</div></pre></td></tr></table></figure>
<p>Next, how doesn’t this script find all the commanders in folder commander.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">loadCommandsInDirectory</span><span class="params">(commandsDirectory)</span>:</span></div><div class="line">  <span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(commandsDirectory):</div><div class="line">    fileName, fileExtension = os.path.splitext(file)</div><div class="line">    <span class="keyword">if</span> fileExtension == <span class="string">'.py'</span>:</div><div class="line">      module = imp.load_source(fileName, os.path.join(commandsDirectory, file))</div><div class="line"></div><div class="line">      <span class="keyword">if</span> hasattr(module, <span class="string">'lldbinit'</span>):</div><div class="line">        module.lldbinit()</div><div class="line"></div><div class="line">      <span class="keyword">if</span> hasattr(module, <span class="string">'lldbcommands'</span>):</div><div class="line">        module._loadedFunctions = &#123;&#125;</div><div class="line">        <span class="keyword">for</span> command <span class="keyword">in</span> module.lldbcommands():</div><div class="line">          loadCommand(module, command, commandsDirectory, fileName, fileExtension)</div></pre></td></tr></table></figure></p>
<p>Here we know, we should add function named <code>lldbinit</code> and <code>lldbcommands</code>. Actually, <code>lldbcommands</code> is a list of all the commands in that file.<br>Choose one display commands category.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">lldbcommands</span><span class="params">()</span>:</span></div><div class="line">  <span class="keyword">return</span> [</div><div class="line">    FBCoreAnimationFlushCommand(),</div><div class="line">    FBDrawBorderCommand(),</div><div class="line">    FBRemoveBorderCommand(),</div><div class="line">    FBMaskViewCommand(),</div><div class="line">    FBUnmaskViewCommand(),</div><div class="line">    FBShowViewCommand(),</div><div class="line">    FBHideViewCommand(),</div><div class="line">  ]</div></pre></td></tr></table></figure><br>In chisel, each commander is using one class to represent. Take command <code>FBShowViewCommand()</code> for example. It is subclass of <code>FBCommand</code> defined in file fblldbinit.py. In this class, there are 5 public methods defined<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FBCommand</span>:</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">options</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="keyword">return</span> []</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">args</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="keyword">return</span> []</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">description</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">''</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self, arguments, option)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure><br>All the command should implement parts of above methods. The function - run will be called in fblldb - <code>makeRunCommand</code>.</p>
<h2 id="2-Add-customized-commander"><a href="#2-Add-customized-commander" class="headerlink" title="2. Add customized commander."></a>2. Add customized commander.</h2><p>Till now, we have recogornized how chisel works. So let’s learn how to add our customized commander into it. Recently, our Mobile team in MicroStrategy wants to enhance this tool to integrate with our issue report system - TQMS. In our TQMS system, we could get the general information of an issue. Different issue may use different mobile server. Each time, we should open the issue and find this config link for this mobile server. Then paste it into safari or other place to open it to load our app. It is very wasting time. So we want to add a function that input the TQMS id and generate config link and document path (this is related with our product, let’s just define as MicroStrategy Toturial-&gt;Sandbox-&gt;njiang-&gt;test) for us and apply the url and document path in our app.<br>Here we have get our requirement.  </p>
<pre><code>1. Get config url and document from TQMS system.
2. Apply the config link into our system
3. Find the document path and open the folder.
</code></pre><p>Let’s start to work.</p>
<p>###2.1 Get config url and document from TQMS system<br>Here comes the problem. How could we get the issue information. Here we use chrome develop tools. Then we could find it uses GetAllCommunicationsTypes to get issue information.<br>And its request header is<br><img src="/uploads/2014-05-11/1.png" class="center"><br>You coulde see, we only send a json string, which contains the issue id. In this case, the issue id is 880507. Then we could generate the response text which contains issue information, like comments, full description and so on. Meanwhile, all the information is orignized with json formatting. So it is easy for us to generate the key inforamtion.<br><img src="/uploads/2014-05-11/2.png" class="center"></p>
<p>Here I want to share with you an open source lib of python - requests. You could find this lib here <a href="http://docs.python-requests.org/en/latest/" target="_blank" rel="external">http://docs.python-requests.org/en/latest/</a>. The setup steps are very easy. </p>
<p>Input <code>python setup install</code> in the terminal. Of course, you should <code>cd requests</code> first.</p>
<p>During parse this json string, I found the session of TQMS system will be expired. So I do some research on how to web server to authorize. Actually, our system use IIS authorization, domain corp. After generate authorization, we will add authorization cookies into request header. So now our aim is to get the authorizaiton cookies.<br>There is a login.asp, we can use our corp id and password to get authorization. Here we will use another lib of requests - requests - ntlm. You could find it here <a href="https://github.com/requests/requests-ntlm" target="_blank" rel="external">https://github.com/requests/requests-ntlm</a>.<br>Use the same method to install it as requests.</p>
<p>Get authorization cookies code is like below:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getAuthorizationCookies</span><span class="params">(username)</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'msilldbconfighelpers.py - getAuthorizationCookies'</span></div><div class="line">    password = getpass.getpass(<span class="string">'Password for '</span> + username + <span class="string">': '</span>)</div><div class="line">    login_url = <span class="string">'https://XXXXXXX.com/Technology/TQMSWeb/login/login.aspx?ReturnUrl=%2fTechnology%2fTQMSWeb%2fviewissue%2fviewissuewindow.aspx%3fid%3d877255%26searchid%3d2746652&amp;id=877255&amp;searchid=2746652'</span></div><div class="line">    response = requests.get(login_url, auth = HttpNtlmAuth(username, password))</div><div class="line">    <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</div><div class="line">        <span class="keyword">return</span> response.request._cookies</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">None</span></div></pre></td></tr></table></figure></p>
<p>After we get the authorization, then composite a request header for tqms web service.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">combinationRequestHeaders</span><span class="params">(cookies)</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'msilldbconfighelpers.py - combinationRequestHeaders'</span></div><div class="line">    headers = &#123; <span class="string">"Connection"</span>: <span class="string">"keep-alive"</span>,</div><div class="line">                <span class="string">"Content-Length"</span>: <span class="number">20</span>,</div><div class="line">                <span class="string">"Accept"</span>: <span class="string">"application/json, text/javascript, */*; q=0.01"</span>,</div><div class="line">                <span class="string">"Origin"</span>: <span class="string">"https://XXXXXXXX.com"</span>,</div><div class="line">                <span class="string">"X-Requested-With"</span>: <span class="string">"XMLHttpRequest"</span>,</div><div class="line">                <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/34.0.1847.131 Safari/537.36"</span>,</div><div class="line">                <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span>,</div><div class="line">                <span class="string">"Referer"</span>: <span class="string">"https://XXXXXXXX.com/Technology/TQMSWeb/viewissue/viewissuewindow.aspx?id=882018"</span>,</div><div class="line">                <span class="string">"Accept-Encoding"</span>: <span class="string">"gzip,deflate,sdch"</span>,</div><div class="line">                <span class="string">"Accept-Language"</span>: <span class="string">"en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4"</span>,</div><div class="line">                <span class="string">"Cookie"</span>: cookies&#125;</div><div class="line">    <span class="keyword">return</span> headers</div></pre></td></tr></table></figure></p>
<p>Then get config url and document using following method:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getTQMSInformationDict</span><span class="params">(tqms)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        config_path = getConfigFilePath()</div><div class="line">        <span class="keyword">if</span> os.path.isfile(config_path) == <span class="keyword">False</span>:</div><div class="line">            <span class="keyword">print</span> <span class="string">'Please create an file named "config" under '</span> + config_path + <span class="string">' ! Format with'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'[Login]'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'domain = [the domain]'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'username = [your username]'</span></div><div class="line">            <span class="keyword">return</span></div><div class="line">        cf = ConfigParser.ConfigParser()</div><div class="line">        cf.read(config_path)</div><div class="line">        domain = cf.get(<span class="string">'Login'</span>, <span class="string">'domain'</span>)</div><div class="line">        username = cf.get(<span class="string">'Login'</span>, <span class="string">'username'</span>)</div><div class="line"></div><div class="line">        <span class="keyword">if</span> domain <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> username <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">            <span class="keyword">print</span> <span class="string">'Please create an file named "config" under '</span> + config_path + <span class="string">'! Format with\n'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'[Login]'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'domain = [the domain]'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'username = [your username]'</span></div><div class="line">            <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="keyword">print</span> <span class="string">'msilldbconfighelpers.py - getMobileConfigLinkForTQMS'</span></div><div class="line">        username = domain + <span class="string">'\\'</span> + username</div><div class="line">        <span class="comment"># print username</span></div><div class="line">        service_url = <span class="string">'https://XXXXXX.com/technology/tqmsservices/issues.asmx/GetAllComunicationsPerType'</span></div><div class="line">        payload = &#123;<span class="string">"IssueId"</span>: tqms&#125;</div><div class="line">        json_data = json.dumps(payload)</div><div class="line"></div><div class="line">        <span class="comment"># 1. Try to use local cookies</span></div><div class="line">        cookies_read_from_file = <span class="keyword">True</span></div><div class="line">        cookies = getCookies()</div><div class="line"></div><div class="line">        <span class="keyword">if</span> cookies <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">            cookies = getAuthorizationCookies(username)</div><div class="line">            <span class="keyword">if</span> cookies <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">                <span class="keyword">raise</span> <span class="string">"Failed to get the authorization for username: %s"</span> % username</div><div class="line">            recordCookies(cookies)</div><div class="line">            cookies_read_from_file = <span class="keyword">False</span></div><div class="line"></div><div class="line">        cookies_str = dumpCookies(cookies)</div><div class="line"></div><div class="line">        <span class="comment"># 2. get details description response string for tqms</span></div><div class="line">        headers = combinationRequestHeaders(cookies_str)</div><div class="line">        response = requests.post(service_url, data=json_data, headers=headers)</div><div class="line"></div><div class="line">        <span class="keyword">print</span> response.status_code</div><div class="line"></div><div class="line">        <span class="keyword">if</span> response.status_code != <span class="number">200</span> <span class="keyword">and</span> cookies_read_from_file == <span class="keyword">True</span>:</div><div class="line">            <span class="keyword">print</span> <span class="string">"Try to relogin with Username!"</span></div><div class="line">            cookies = getAuthorizationCookies(username)</div><div class="line">            <span class="keyword">if</span> cookies <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">                <span class="keyword">raise</span> <span class="string">"Failed to get the authorization with Username: %s"</span> % username</div><div class="line">            recordCookies(cookies)</div><div class="line">            cookies_str = dumpCookies(cookies)</div><div class="line">            headers = combinationRequestHeaders(cookies_str)</div><div class="line">            response = requests.post(service_url, data=json_data, headers=headers)</div><div class="line">            <span class="keyword">if</span> response.status_code != <span class="number">200</span>:</div><div class="line">                <span class="keyword">raise</span> <span class="string">"Failed to get the authorization with Username: %s"</span> % username</div><div class="line"></div><div class="line">        <span class="keyword">if</span> response.status_code != <span class="number">200</span>:</div><div class="line">            <span class="keyword">raise</span> <span class="string">"Failed to get the authorization with Username!"</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="comment"># 3. parse json string</span></div><div class="line">            issue_infos = json.loads(response.text)[<span class="string">'d'</span>]</div><div class="line">            full_description_u = issue_infos[<span class="string">'Description'</span>]</div><div class="line">            comments_u = issue_infos[<span class="string">'Comments'</span>]</div><div class="line">            full_description = full_description_u.encode(<span class="string">"utf-8"</span>)</div><div class="line">            comments = comments_u.encode(<span class="string">"utf-8"</span>)</div><div class="line">            <span class="keyword">if</span> full_description <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> full_description == <span class="string">''</span>:</div><div class="line">                <span class="keyword">raise</span> Exception(<span class="string">"Failed to get the full description for TQMS: %s"</span> % tqms)</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                config_url = generateConfigURLLink(comments, full_description)</div><div class="line">                document_path = generateDocumentPath(comments, full_description)</div><div class="line">                path_separator = getSeparatorForDocumentPath(document_path)</div><div class="line">                <span class="keyword">return</span> &#123;<span class="string">"url"</span>: config_url, <span class="string">"document"</span>: document_path, <span class="string">"separator"</span>: path_separator&#125;</div><div class="line">                </div><div class="line">    <span class="keyword">except</span> Exception, e:</div><div class="line">        <span class="keyword">print</span> e</div></pre></td></tr></table></figure></p>
<p>###2.2 Apply url<br>After generate url link, we will turn to MSIConfigCommand. The class is like below.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">lldbcommands</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> [</div><div class="line">        MSIConfigCommand()</div><div class="line">    ]</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MSIConfigCommand</span><span class="params">(fb.FBCommand)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'config'</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">description</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'Config MSTR Mobile Application with URL/TQMS id.'</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">options</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> [</div><div class="line">                fb.FBCommandArgument(short=<span class="string">'-u'</span>, long=<span class="string">'--url'</span>, arg=<span class="string">'url'</span>, type=<span class="string">'string'</span>, default=<span class="string">''</span>, help=<span class="string">'Config mobile app with url'</span>),</div><div class="line">                fb.FBCommandArgument(short=<span class="string">'-d'</span>, long=<span class="string">'--id'</span>, arg=<span class="string">'id'</span>, type=<span class="string">'string'</span>, default=<span class="string">'880507'</span>, help=<span class="string">'TQMS ID'</span>)</div><div class="line">        ]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getPureUrlLink</span><span class="params">(self, dirty_url)</span>:</span></div><div class="line">        <span class="keyword">if</span> dirty_url <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line"></div><div class="line">        results = dirty_url.split(<span class="string">' '</span>)</div><div class="line">        <span class="keyword">for</span> str <span class="keyword">in</span> results:</div><div class="line">            <span class="keyword">if</span> str != <span class="string">''</span>:</div><div class="line">                <span class="keyword">return</span> str</div><div class="line"></div><div class="line"><span class="comment">#    def args(self):</span></div><div class="line"><span class="comment">#        return [ fb.FBCommandArgument(arg='url', type='string', help='The config url.', default='')]</span></div><div class="line"></div><div class="line"><span class="comment"># expr [[[UIApplication sharedApplication] delegate] application:application openURL:url sourceApplication:sourceApplication annotation:annotation]</span></div><div class="line"><span class="comment"># application = [UIApplication sharedApplication]</span></div><div class="line"><span class="comment"># url = [above]</span></div><div class="line"><span class="comment"># sourceApplication = @"com.apple.mobilesafari"</span></div><div class="line"><span class="comment"># annotation = NSDictionary</span></div><div class="line"><span class="comment"># &#123;</span></div><div class="line"><span class="comment">#     ReferrerURL = "http://10.197.34.70/";</span></div><div class="line"><span class="comment"># &#125;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self, args, options)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">'------ start config ------'</span></div><div class="line"></div><div class="line">        <span class="keyword">if</span> options.id == <span class="string">""</span> <span class="keyword">and</span> options.url == <span class="string">""</span>:</div><div class="line">            <span class="keyword">print</span> <span class="string">"error, -d or -u missing!"</span></div><div class="line">            <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. Generate url and document path first</span></div><div class="line">        <span class="keyword">if</span> options.id <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> options.id != <span class="string">""</span>:</div><div class="line">            tqms_dict = getTQMSInformationDict(options.id)</div><div class="line"></div><div class="line">            <span class="keyword">for</span> key <span class="keyword">in</span> tqms_dict:</div><div class="line">                <span class="keyword">if</span> tqms_dict[key] <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> tqms_dict[key] == <span class="string">""</span>:</div><div class="line">                    <span class="keyword">print</span> <span class="string">"Error when get %s for TQMS: %s"</span> % (key, options.id)</div><div class="line"></div><div class="line">            config_url = tqms_dict[<span class="string">'url'</span>]</div><div class="line">            document_path = tqms_dict[<span class="string">'document'</span>]</div><div class="line">            path_separator = tqms_dict[<span class="string">'separator'</span>]</div><div class="line"></div><div class="line">        <span class="keyword">elif</span> options.url <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> options.url != <span class="string">""</span>:</div><div class="line">            config_url = options.url</div><div class="line"></div><div class="line">        config_url = self.getPureUrlLink(config_url)</div><div class="line">        <span class="keyword">print</span> <span class="string">"config_url = %s"</span> % config_url</div><div class="line">        <span class="keyword">print</span> <span class="string">"document_path = %s"</span> % document_path</div><div class="line"></div><div class="line">        <span class="comment"># 2. Config the document path into FolderPathSearcher</span></div><div class="line">        <span class="keyword">if</span> document_path <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> path_separator <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</div><div class="line">            lldb.debugger.HandleCommand(<span class="string">'expression [FolderPathSearcher getInstance]'</span>)</div><div class="line">            <span class="keyword">if</span> document_path <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> document_path != <span class="string">""</span>:</div><div class="line">                expr = <span class="string">'[[FolderPathSearcher getInstance] setSearchPath:@"'</span>+ document_path +<span class="string">'" Separator:@"'</span>+ path_separator +<span class="string">'"]'</span></div><div class="line">                lldb.debugger.HandleCommand(<span class="string">'expression '</span> + expr)</div><div class="line"></div><div class="line">        <span class="comment"># 3. Apply url link</span></div><div class="line">        <span class="keyword">if</span> config_url <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</div><div class="line">            url = fb.evaluateExpression(<span class="string">'(NSURL*)[NSURL URLWithString:@"%s"]'</span> % config_url)</div><div class="line">            application = fb.evaluateExpression(<span class="string">'(UIApplication*)[UIApplication sharedApplication]'</span>)</div><div class="line">            delegate = fb.evaluateExpression(<span class="string">'[(UIApplication*)%s delegate]'</span> % application)</div><div class="line">            lldb.debugger.HandleCommand(<span class="string">'expr (void)[%s application:%s openURL:%s sourceApplication:nil annotation:nil]'</span> % (delegate, application, url))</div><div class="line">            <span class="keyword">print</span> <span class="string">'------ end config ------'</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">print</span> <span class="string">'Failed to generate the url link, please check your url or TQMS ID is correct!'</span></div><div class="line"></div><div class="line">        <span class="comment"># 4. Continue run our app</span></div><div class="line">        lldb.debugger.SetAsync(<span class="keyword">True</span>)</div><div class="line">        lldb.debugger.GetSelectedTarget().GetProcess().Continue()</div></pre></td></tr></table></figure></p>
<p>You can see we add two options for this command “-d” and “-u”. When config our app, we use system callback function - <code>[UIApplicationDelegate application: openURL: sourceApplication:nil annotation:nil]</code>. </p>
<p>###2.3 Find document path<br>This we get projects system information is async. So we should add logic to handle this. I will add this part later.</p>
<p>###2.4 Continue lldb automatically<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">lldb.debugger.SetAsync(<span class="keyword">True</span>)</div><div class="line">lldb.debugger.GetSelectedTarget().GetProcess().Continue()</div></pre></td></tr></table></figure></p>
<p>##3 Write auto setup shell script</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"------ Start Config Chisel ------"</span></div><div class="line"></div><div class="line">curPath=`<span class="built_in">pwd</span>`</div><div class="line"><span class="built_in">echo</span> <span class="variable">$curPath</span></div><div class="line">lldbinitFile=<span class="string">".lldbinit"</span></div><div class="line"><span class="built_in">cd</span> ~</div><div class="line"><span class="keyword">if</span> [[ ! <span class="_">-f</span> <span class="string">"<span class="variable">$lldbinitFile</span>"</span> ]]; <span class="keyword">then</span></div><div class="line">	touch <span class="string">"<span class="variable">$lldbinitFile</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	rm <span class="string">"<span class="variable">$lldbinitFile</span>"</span></div><div class="line">	touch <span class="string">"<span class="variable">$lldbinitFile</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment">#echo "# ~/.lldbinit" &gt;&gt; $lldbinitFile</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"command script import "</span><span class="variable">$curPath</span><span class="string">"/fblldb.py"</span> &gt;&gt; <span class="variable">$lldbinitFile</span></div><div class="line"></div><div class="line"><span class="built_in">cd</span> <span class="string">"<span class="variable">$curPath</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Please input the following information:"</span></div><div class="line"><span class="built_in">echo</span> -n <span class="string">"domain = "</span></div><div class="line"><span class="built_in">read</span> domain</div><div class="line"><span class="built_in">echo</span> -n <span class="string">"username = "</span></div><div class="line"><span class="built_in">read</span> username</div><div class="line"></div><div class="line">configPath=<span class="string">"/tmp/MicroStrategy"</span></div><div class="line">configFile=<span class="string">"/tmp/MicroStrategy/TQMS.cfg"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [ ! <span class="_">-d</span> <span class="string">"<span class="variable">$configPath</span>"</span> ]; <span class="keyword">then</span></div><div class="line">	mkdir <span class="string">"<span class="variable">$configPath</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [[ ! <span class="_">-f</span> <span class="string">"<span class="variable">$configFile</span>"</span> ]]; <span class="keyword">then</span></div><div class="line">	touch <span class="string">"<span class="variable">$configFile</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	rm <span class="string">"<span class="variable">$configFile</span>"</span></div><div class="line">	touch <span class="string">"<span class="variable">$configFile</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"[Login]"</span> &gt;&gt; <span class="variable">$configFile</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"domain = "</span><span class="variable">$domain</span> &gt;&gt; <span class="variable">$configFile</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"username = "</span><span class="variable">$username</span> &gt;&gt; <span class="variable">$configFile</span></div><div class="line"></div><div class="line"><span class="built_in">cd</span> packages/requests</div><div class="line">sudo python setup.py install</div><div class="line"><span class="built_in">cd</span> ../requests-ntlm</div><div class="line">sudo python setup.py install</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"------ Config Chisel Finished -------"</span></div></pre></td></tr></table></figure>
<p>##4 How to use</p>
<p>###4.1 Setup:<br>After you download the source code, run the following command in Terminal  </p>
<ol>
<li>cd chisel</li>
<li>./setup.sh<br> a. input your domain, like “corp”<br> b. input you corp id, like “XXXX”<br> c. input user password (this password is your Mac OS user’s password, it is used to run sudo command. For corp password, it will require later in how-to #2.)</li>
</ol>
<p>###4.2 How-to:<br>We added a new command named “config” in the python script. There are two options “-u” and “-d”. “-u” means using url to configuration our app. “-d” means using TQMS id to fetch the config url and configuration our app. You could run our app in debug mode. After app launches,  </p>
<ol>
<li>Pause our app manually.</li>
<li>You could input any one of following two commands, if it is the first time you run this command or the login cookie is expired, you need to input your corp id password to generate a new login cookie. It will not store the password information.<br>a. config –u [a url link]<br>b. config –d 854318</li>
</ol>
<p>###4.3 Discussion:</p>
<ol>
<li>About setup.sh, I have combined the setting commands into one shell script. It will do the following things:<br> a. Re-create ~/.lldbinit. ~/.lldbinit is used to init lldb extend script, like import python script.<br> b. After get user corp id, it will store the information in “/tmp/MicroStrategy/TQMS.cfg”.<br> c. Install two depends libs: requests and requests-ntlm. These two libs are used to get the authorization login cookies.</li>
<li>About login cookies, if there is no login success cookies or the success login cookie is expired, we will first try to login the corp id and get the login success cookie. After get the authorization cookies, we will store this information in “/tmp/MicroStratety/TQMS.cookies”. If the cookies is useable, we will re-use this cookies to generate configuration url link.</li>
<li>About generate URL config link, currently, we will find string, which starts with “mstr:///” (Thanks for Liang’s comments). Now it is fine. But if there is 2 or more configuration link in the full description, it will be hard to determine which one is needed. I am wondered whether we could ask QE to format the configuration link and document path.</li>
</ol>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/05/05/zi-xuan-suo/" rel="next" title="自旋锁">
                <i class="fa fa-chevron-left"></i> 自旋锁
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014/07/12/reverse-alternate-levels-of-a-perfect-binary-tree/" rel="prev" title="Reverse alternate levels of a perfect binary tree">
                Reverse alternate levels of a perfect binary tree <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2014/05/11/add-customize-commander-into-facebook-chisel/"
           data-title="" data-url="http://www.njiang.cn/2014/05/11/add-customize-commander-into-facebook-chisel/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar/avatar.jpg"
               alt="姜楠" />
          <p class="site-author-name" itemprop="name">姜楠</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">117</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/njiang1987" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  github
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#tags-lldb"><span class="nav-number">1.</span> <span class="nav-text">tags: lldb</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-How-the-chisel-init"><span class="nav-number">2.</span> <span class="nav-text">1. How the chisel init</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Add-customized-commander"><span class="nav-number">3.</span> <span class="nav-text">2. Add customized commander.</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">姜楠</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"njiang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
